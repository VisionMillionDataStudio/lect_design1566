# æ•™è‚²ææ–™å†…å®¹æ£€æµ‹æ£€æµ‹ç³»ç»Ÿæºç åˆ†äº«
 # [ä¸€æ¡é¾™æ•™å­¦YOLOV8æ ‡æ³¨å¥½çš„æ•°æ®é›†ä¸€é”®è®­ç»ƒ_70+å…¨å¥—æ”¹è¿›åˆ›æ–°ç‚¹å‘åˆŠ_Webå‰ç«¯å±•ç¤º]

### 1.ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

é¡¹ç›®å‚è€ƒ[AAAI Association for the Advancement of Artificial Intelligence](https://gitee.com/qunshansj/projects)

é¡¹ç›®æ¥æº[AACV Association for the Advancement of Computer Vision](https://gitee.com/qunmasj/projects)

ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

éšç€ä¿¡æ¯æŠ€æœ¯çš„è¿…çŒ›å‘å±•ï¼Œæ•™è‚²é¢†åŸŸçš„æ•°å­—åŒ–è½¬å‹å·²æˆä¸ºä¸å¯é€†è½¬çš„è¶‹åŠ¿ã€‚æ•™è‚²ææ–™çš„ä¸°å¯Œæ€§å’Œå¤šæ ·æ€§ä¸ºæ•™å­¦æä¾›äº†æ›´ä¸ºå¹¿é˜”çš„è§†é‡ï¼Œä½†åŒæ—¶ä¹Ÿå¸¦æ¥äº†å†…å®¹ç®¡ç†å’Œä¿¡æ¯æ£€ç´¢çš„æŒ‘æˆ˜ã€‚ä¼ ç»Ÿçš„æ•™è‚²ææ–™é€šå¸¸ä»¥æ–‡æœ¬å’Œå›¾åƒçš„å½¢å¼å‘ˆç°ï¼Œå¦‚ä½•æœ‰æ•ˆåœ°å¯¹è¿™äº›å†…å®¹è¿›è¡Œåˆ†ç±»ã€è¯†åˆ«å’Œç®¡ç†ï¼Œæˆä¸ºæ•™è‚²æŠ€æœ¯ç ”ç©¶çš„é‡è¦è¯¾é¢˜ã€‚åœ¨æ­¤èƒŒæ™¯ä¸‹ï¼ŒåŸºäºæ·±åº¦å­¦ä¹ çš„ç›®æ ‡æ£€æµ‹æŠ€æœ¯é€æ¸å—åˆ°å…³æ³¨ï¼Œå°¤å…¶æ˜¯YOLOï¼ˆYou Only Look Onceï¼‰ç³»åˆ—æ¨¡å‹å› å…¶é«˜æ•ˆæ€§å’Œå®æ—¶æ€§è€Œè¢«å¹¿æ³›åº”ç”¨äºå„ç±»è§†è§‰è¯†åˆ«ä»»åŠ¡ã€‚

YOLOv8ä½œä¸ºYOLOç³»åˆ—çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå…·å¤‡äº†æ›´å¼ºçš„ç‰¹å¾æå–èƒ½åŠ›å’Œæ›´é«˜çš„æ£€æµ‹ç²¾åº¦ï¼Œèƒ½å¤Ÿåœ¨å¤æ‚åœºæ™¯ä¸­å®ç°å¿«é€Ÿè€Œå‡†ç¡®çš„ç›®æ ‡æ£€æµ‹ã€‚é€šè¿‡å¯¹æ•™è‚²ææ–™ä¸­ä¸åŒç±»å‹å†…å®¹çš„è‡ªåŠ¨è¯†åˆ«ä¸åˆ†ç±»ï¼ŒYOLOv8èƒ½å¤Ÿä¸ºæ•™è‚²å·¥ä½œè€…æä¾›æœ‰æ•ˆçš„æ”¯æŒï¼Œå¸®åŠ©ä»–ä»¬å¿«é€Ÿæ‰¾åˆ°æ‰€éœ€çš„æ•™å­¦èµ„æºï¼Œæå‡æ•™å­¦æ•ˆç‡ã€‚æ­¤å¤–ï¼Œæ•™è‚²ææ–™çš„å†…å®¹æ£€æµ‹ç³»ç»Ÿè¿˜å¯ä»¥ä¸ºæ•™è‚²ç ”ç©¶æä¾›æ•°æ®æ”¯æŒï¼Œä¿ƒè¿›æ•™è‚²å†…å®¹çš„åˆ†æä¸ä¼˜åŒ–ã€‚

æœ¬ç ”ç©¶æ—¨åœ¨åŸºäºæ”¹è¿›çš„YOLOv8æ¨¡å‹ï¼Œæ„å»ºä¸€ä¸ªé«˜æ•ˆçš„æ•™è‚²ææ–™å†…å®¹æ£€æµ‹ç³»ç»Ÿã€‚è¯¥ç³»ç»Ÿå°†é’ˆå¯¹ç‰¹å®šçš„æ•™è‚²ææ–™æ•°æ®é›†è¿›è¡Œè®­ç»ƒä¸æµ‹è¯•ï¼Œè¯¥æ•°æ®é›†åŒ…å«5500å¼ å›¾åƒï¼Œæ¶µç›–äº†13ä¸ªç±»åˆ«ï¼ŒåŒ…æ‹¬å›¾è¡¨ã€å›¾ç¤ºã€æ’å›¾ã€æ‰‹å†™å†…å®¹ã€æ ‡é¢˜ç­‰ã€‚è¿™äº›ç±»åˆ«ä¸ä»…åæ˜ äº†æ•™è‚²ææ–™çš„å¤šæ ·æ€§ï¼Œä¹Ÿä¸ºç³»ç»Ÿçš„å‡†ç¡®æ€§å’Œå®ç”¨æ€§æä¾›äº†ä¸°å¯Œçš„åŸºç¡€ã€‚é€šè¿‡å¯¹è¿™äº›ç±»åˆ«çš„æœ‰æ•ˆè¯†åˆ«ï¼Œç³»ç»Ÿèƒ½å¤Ÿå®ç°å¯¹æ•™è‚²ææ–™çš„æ™ºèƒ½åŒ–ç®¡ç†ï¼Œå¸®åŠ©æ•™å¸ˆå’Œå­¦ç”Ÿå¿«é€Ÿè·å–æ‰€éœ€ä¿¡æ¯ï¼Œè¿›è€Œæå‡å­¦ä¹ æ•ˆæœã€‚

æ­¤å¤–ï¼Œéšç€æ•™è‚²ä¿¡æ¯åŒ–çš„ä¸æ–­æ¨è¿›ï¼Œæ•™è‚²ææ–™çš„æ•°å­—åŒ–å­˜å‚¨å’Œç®¡ç†å˜å¾—æ„ˆå‘é‡è¦ã€‚ä¼ ç»Ÿçš„æ‰‹åŠ¨åˆ†ç±»å’Œæ£€ç´¢æ–¹å¼ä¸ä»…è€—æ—¶è€—åŠ›ï¼Œè€Œä¸”å®¹æ˜“å‡ºç°é”™è¯¯ã€‚åŸºäºYOLOv8çš„æ•™è‚²ææ–™å†…å®¹æ£€æµ‹ç³»ç»Ÿèƒ½å¤Ÿå®ç°è‡ªåŠ¨åŒ–çš„å†…å®¹è¯†åˆ«å’Œåˆ†ç±»ï¼Œå¤§å¤§æé«˜äº†å·¥ä½œæ•ˆç‡ã€‚åŒæ—¶ï¼Œè¯¥ç³»ç»Ÿçš„åº”ç”¨ä¹Ÿæœ‰åŠ©äºæ•™è‚²èµ„æºçš„å…±äº«ä¸å†åˆ©ç”¨ï¼Œæ¨åŠ¨æ•™è‚²å…¬å¹³çš„å‘å±•ã€‚

åœ¨å…¨çƒèŒƒå›´å†…ï¼Œæ•™è‚²èµ„æºçš„æœ‰æ•ˆåˆ©ç”¨å’Œç®¡ç†å·²æˆä¸ºå„å›½æ•™è‚²æ”¹é©çš„é‡è¦ç›®æ ‡ã€‚é€šè¿‡æ„å»ºåŸºäºæ”¹è¿›YOLOv8çš„æ•™è‚²ææ–™å†…å®¹æ£€æµ‹ç³»ç»Ÿï¼Œæœ¬ç ”ç©¶ä¸ä»…ä¸ºæ•™è‚²å·¥ä½œè€…æä¾›äº†å®ç”¨çš„å·¥å…·ï¼Œä¹Ÿä¸ºæ•™è‚²æŠ€æœ¯çš„ç ”ç©¶æä¾›äº†æ–°çš„æ€è·¯å’Œæ–¹æ³•ã€‚éšç€æ•™è‚²ææ–™çš„ä¸æ–­å¢åŠ ï¼Œå¦‚ä½•åˆ©ç”¨å…ˆè¿›çš„æŠ€æœ¯æ‰‹æ®µè¿›è¡Œæœ‰æ•ˆç®¡ç†å’Œåˆ©ç”¨ï¼Œå°†æ˜¯æœªæ¥æ•™è‚²ç ”ç©¶çš„é‡è¦æ–¹å‘ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼Œæœ¬ç ”ç©¶çš„å¼€å±•å…·æœ‰é‡è¦çš„ç†è®ºæ„ä¹‰å’Œå®è·µä»·å€¼ã€‚é€šè¿‡å¯¹æ•™è‚²ææ–™å†…å®¹çš„æ™ºèƒ½æ£€æµ‹ä¸åˆ†ç±»ï¼Œä¸ä»…èƒ½å¤Ÿæå‡æ•™è‚²å·¥ä½œè€…çš„å·¥ä½œæ•ˆç‡ï¼Œä¹Ÿä¸ºæ•™è‚²èµ„æºçš„ä¼˜åŒ–é…ç½®æä¾›äº†æ•°æ®æ”¯æŒï¼Œè¿›è€Œæ¨åŠ¨æ•™è‚²ä¿¡æ¯åŒ–çš„æ·±å…¥å‘å±•ã€‚å¸Œæœ›æœ¬ç ”ç©¶èƒ½å¤Ÿä¸ºæ•™è‚²é¢†åŸŸçš„æŠ€æœ¯åˆ›æ–°å’Œåº”ç”¨æä¾›æœ‰ç›Šçš„å‚è€ƒä¸å€Ÿé‰´ã€‚

### 2.å›¾ç‰‡æ¼”ç¤º

![1.png](1.png)

![2.png](2.png)

![3.png](3.png)

##### æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ2.å›¾ç‰‡æ¼”ç¤ºâ€å’Œâ€œ3.è§†é¢‘æ¼”ç¤ºâ€å±•ç¤ºçš„ç³»ç»Ÿå›¾ç‰‡æˆ–è€…è§†é¢‘å¯èƒ½ä¸ºè€ç‰ˆæœ¬ï¼Œæ–°ç‰ˆæœ¬åœ¨è€ç‰ˆæœ¬çš„åŸºç¡€ä¸Šå‡çº§å¦‚ä¸‹ï¼šï¼ˆå®é™…æ•ˆæœä»¥å‡çº§çš„æ–°ç‰ˆæœ¬ä¸ºå‡†ï¼‰

  ï¼ˆ1ï¼‰é€‚é…äº†YOLOV8çš„â€œç›®æ ‡æ£€æµ‹â€æ¨¡å‹å’Œâ€œå®ä¾‹åˆ†å‰²â€æ¨¡å‹ï¼Œé€šè¿‡åŠ è½½ç›¸åº”çš„æƒé‡ï¼ˆ.ptï¼‰æ–‡ä»¶å³å¯è‡ªé€‚åº”åŠ è½½æ¨¡å‹ã€‚

  ï¼ˆ2ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«æ¨¡å¼ã€‚

  ï¼ˆ3ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«ç»“æœä¿å­˜å¯¼å‡ºï¼Œè§£å†³æ‰‹åŠ¨å¯¼å‡ºï¼ˆå®¹æ˜“å¡é¡¿å‡ºç°çˆ†å†…å­˜ï¼‰å­˜åœ¨çš„é—®é¢˜ï¼Œè¯†åˆ«å®Œè‡ªåŠ¨ä¿å­˜ç»“æœå¹¶å¯¼å‡ºåˆ°tempDirä¸­ã€‚

  ï¼ˆ4ï¼‰æ”¯æŒWebå‰ç«¯ç³»ç»Ÿä¸­çš„æ ‡é¢˜ã€èƒŒæ™¯å›¾ç­‰è‡ªå®šä¹‰ä¿®æ”¹ï¼Œåé¢æä¾›ä¿®æ”¹æ•™ç¨‹ã€‚

  å¦å¤–æœ¬é¡¹ç›®æä¾›è®­ç»ƒçš„æ•°æ®é›†å’Œè®­ç»ƒæ•™ç¨‹,æš‚ä¸æä¾›æƒé‡æ–‡ä»¶ï¼ˆbest.ptï¼‰,éœ€è¦æ‚¨æŒ‰ç…§æ•™ç¨‹è¿›è¡Œè®­ç»ƒåå®ç°å›¾ç‰‡æ¼”ç¤ºå’ŒWebå‰ç«¯ç•Œé¢æ¼”ç¤ºçš„æ•ˆæœã€‚

### 3.è§†é¢‘æ¼”ç¤º

[3.1 è§†é¢‘æ¼”ç¤º](https://www.bilibili.com/video/BV1mjtpeBEjx/)

### 4.æ•°æ®é›†ä¿¡æ¯å±•ç¤º

##### 4.1 æœ¬é¡¹ç›®æ•°æ®é›†è¯¦ç»†æ•°æ®ï¼ˆç±»åˆ«æ•°ï¼†ç±»åˆ«åï¼‰

nc: 12
names: ['chart', 'diagram', 'figure', 'footer', 'handwriting', 'header', 'instructor', 'picture', 'schematic diagram', 'table', 'text box', 'title']


##### 4.2 æœ¬é¡¹ç›®æ•°æ®é›†ä¿¡æ¯ä»‹ç»

æ•°æ®é›†ä¿¡æ¯å±•ç¤º

åœ¨ç°ä»£æ•™è‚²é¢†åŸŸï¼Œéšç€æ•°å­—åŒ–æ•™å­¦ææ–™çš„æ™®åŠï¼Œå¦‚ä½•æœ‰æ•ˆåœ°è¯†åˆ«å’Œåˆ†æè¿™äº›ææ–™ä¸­çš„ä¿¡æ¯æˆä¸ºäº†ä¸€ä¸ªé‡è¦çš„ç ”ç©¶è¯¾é¢˜ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªåä¸ºâ€œlect_design1â€çš„æ•°æ®é›†ï¼Œæ—¨åœ¨ä¸ºæ”¹è¿›YOLOv8çš„æ•™è‚²ææ–™å†…å®¹æ£€æµ‹ç³»ç»Ÿæä¾›æ”¯æŒã€‚è¯¥æ•°æ®é›†ä¸“æ³¨äºæ•™è‚²ææ–™ä¸­çš„å¤šç§è§†è§‰å…ƒç´ ï¼Œæ¶µç›–äº†12ä¸ªä¸åŒçš„ç±»åˆ«ï¼Œèƒ½å¤Ÿå¸®åŠ©ç³»ç»Ÿæ›´å¥½åœ°ç†è§£å’Œè§£ææ•™å­¦å†…å®¹çš„ç»“æ„ä¸å½¢å¼ã€‚

â€œlect_design1â€æ•°æ®é›†çš„è®¾è®¡åˆè¡·æ˜¯ä¸ºäº†æå‡æœºå™¨å­¦ä¹ æ¨¡å‹åœ¨æ•™è‚²ææ–™ä¸­çš„åº”ç”¨èƒ½åŠ›ï¼Œå°¤å…¶æ˜¯åœ¨å†…å®¹è¯†åˆ«å’Œä¿¡æ¯æå–æ–¹é¢ã€‚æ•°æ®é›†ä¸­åŒ…å«çš„ç±»åˆ«åŒ…æ‹¬ï¼šå›¾è¡¨ï¼ˆchartï¼‰ã€å›¾è§£ï¼ˆdiagramï¼‰ã€æ’å›¾ï¼ˆfigureï¼‰ã€é¡µè„šï¼ˆfooterï¼‰ã€æ‰‹å†™æ–‡å­—ï¼ˆhandwritingï¼‰ã€é¡µçœ‰ï¼ˆheaderï¼‰ã€è®²å¸ˆï¼ˆinstructorï¼‰ã€å›¾ç‰‡ï¼ˆpictureï¼‰ã€ç¤ºæ„å›¾ï¼ˆschematic diagramï¼‰ã€è¡¨æ ¼ï¼ˆtableï¼‰ã€æ–‡æœ¬æ¡†ï¼ˆtext boxï¼‰ä»¥åŠæ ‡é¢˜ï¼ˆtitleï¼‰ã€‚è¿™äº›ç±»åˆ«ä¸ä»…æ¶µç›–äº†æ•™è‚²ææ–™ä¸­å¸¸è§çš„è§†è§‰å…ƒç´ ï¼Œè¿˜åæ˜ äº†æ•™å­¦å†…å®¹çš„å¤šæ ·æ€§å’Œå¤æ‚æ€§ã€‚

æ¯ä¸ªç±»åˆ«åœ¨æ•°æ®é›†ä¸­éƒ½æœ‰ä¸°å¯Œçš„æ ·æœ¬ï¼Œç¡®ä¿äº†æ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­èƒ½å¤Ÿæ¥è§¦åˆ°å„ç§ä¸åŒçš„å®ä¾‹ã€‚ä¾‹å¦‚ï¼Œå›¾è¡¨å’Œè¡¨æ ¼ç±»æ ·æœ¬æä¾›äº†æ•°æ®å¯è§†åŒ–çš„æ¡ˆä¾‹ï¼Œå¸®åŠ©æ¨¡å‹å­¦ä¹ å¦‚ä½•è¯†åˆ«å’Œè§£ææ•°æ®å…³ç³»ï¼›è€Œæ‰‹å†™æ–‡å­—å’Œè®²å¸ˆå›¾åƒåˆ™å¢å¼ºäº†æ¨¡å‹å¯¹äººç±»äº’åŠ¨å’Œä¸ªæ€§åŒ–æ•™å­¦å†…å®¹çš„ç†è§£èƒ½åŠ›ã€‚é€šè¿‡å¯¹è¿™äº›ä¸åŒç±»åˆ«çš„å­¦ä¹ ï¼ŒYOLOv8èƒ½å¤Ÿæ›´å‡†ç¡®åœ°è¯†åˆ«å‡ºæ•™è‚²ææ–™ä¸­çš„å…³é”®å…ƒç´ ï¼Œä»è€Œä¸ºç”¨æˆ·æä¾›æ›´ä¸ºç²¾å‡†çš„å†…å®¹åˆ†æå’Œåé¦ˆã€‚

æ­¤å¤–ï¼Œæ•°æ®é›†çš„æ„å»ºè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç‰¹åˆ«æ³¨é‡æ ·æœ¬çš„å¤šæ ·æ€§å’Œä»£è¡¨æ€§ã€‚æ¯ä¸ªç±»åˆ«çš„æ ·æœ¬éƒ½æ¥æºäºä¸åŒçš„æ•™è‚²åœºæ™¯å’Œææ–™ç±»å‹ï¼ŒåŒ…æ‹¬åœ¨çº¿è¯¾ç¨‹ã€æ•™æã€æ•™å­¦å¹»ç¯ç‰‡ç­‰ã€‚è¿™ç§å¤šæ ·æ€§ç¡®ä¿äº†æ¨¡å‹åœ¨å®é™…åº”ç”¨ä¸­èƒ½å¤Ÿé€‚åº”ä¸åŒçš„æ•™å­¦ç¯å¢ƒå’Œææ–™æ ¼å¼ï¼Œæå‡äº†å…¶æ³›åŒ–èƒ½åŠ›å’Œå®ç”¨æ€§ã€‚

åœ¨æ•°æ®æ ‡æ³¨æ–¹é¢ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ä¸¥æ ¼çš„æ ‡æ³¨æ ‡å‡†ï¼Œç¡®ä¿æ¯ä¸ªæ ·æœ¬çš„ç±»åˆ«æ ‡ç­¾å‡†ç¡®æ— è¯¯ã€‚æ ‡æ³¨å›¢é˜Ÿç”±æ•™è‚²é¢†åŸŸçš„ä¸“å®¶å’Œæ•°æ®ç§‘å­¦å®¶ç»„æˆï¼Œä»–ä»¬ä¸ä»…å…·å¤‡ä¸°å¯Œçš„æ•™è‚²èƒŒæ™¯ï¼Œè¿˜ç†Ÿæ‚‰è®¡ç®—æœºè§†è§‰æŠ€æœ¯ã€‚è¿™ç§è·¨å­¦ç§‘çš„åˆä½œä¸ºæ•°æ®é›†çš„è´¨é‡æä¾›äº†æœ‰åŠ›ä¿éšœï¼Œä½¿å¾—â€œlect_design1â€æˆä¸ºä¸€ä¸ªé«˜è´¨é‡çš„è®­ç»ƒèµ„æºã€‚

æ€»ä¹‹ï¼Œâ€œlect_design1â€æ•°æ®é›†ä¸ºæ”¹è¿›YOLOv8çš„æ•™è‚²ææ–™å†…å®¹æ£€æµ‹ç³»ç»Ÿæä¾›äº†åšå®çš„åŸºç¡€ã€‚é€šè¿‡å¯¹å¤šç§è§†è§‰å…ƒç´ çš„æ·±å…¥å­¦ä¹ ï¼Œæ¨¡å‹å°†èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£æ•™è‚²ææ–™çš„ç»“æ„ä¸å†…å®¹ï¼Œä»è€Œä¸ºæ•™è‚²å·¥ä½œè€…å’Œå­¦ä¹ è€…æä¾›æ›´ä¸ºç²¾å‡†å’Œé«˜æ•ˆçš„æ”¯æŒã€‚éšç€æ•°æ®é›†çš„ä¸æ–­å®Œå–„å’Œæ¨¡å‹çš„æŒç»­ä¼˜åŒ–ï¼Œæˆ‘ä»¬æœŸå¾…åœ¨æ•™è‚²é¢†åŸŸå®ç°æ›´ä¸ºæ™ºèƒ½åŒ–çš„å†…å®¹è¯†åˆ«ä¸åˆ†æï¼Œæ¨åŠ¨æ•™è‚²æŠ€æœ¯çš„è¿›ä¸€æ­¥å‘å±•ã€‚

![4.png](4.png)

![5.png](5.png)

![6.png](6.png)

![7.png](7.png)

![8.png](8.png)

### 5.å…¨å¥—é¡¹ç›®ç¯å¢ƒéƒ¨ç½²è§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰

[5.1 ç¯å¢ƒéƒ¨ç½²æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404473917358506534?logTag=c807d0cbc21c0ef59de5)




[5.2 å®‰è£…Pythonè™šæ‹Ÿç¯å¢ƒåˆ›å»ºå’Œä¾èµ–åº“å®‰è£…è§†é¢‘æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404474678003106304?logTag=1f1041108cd1f708b01a)

### 6.æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰

[6.1 æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰](https://www.ixigua.com/7404477157818401292?logTag=d31a2dfd1983c9668658)

### 7.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰

[7.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰](https://www.ixigua.com/7404478314661806627?logTag=29066f8288e3f4eea3a4)

### 8.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£ï¼ˆéç§‘ç­ä¹Ÿå¯ä»¥è½»æ¾å†™åˆŠå‘åˆŠï¼ŒV10ç‰ˆæœ¬æ­£åœ¨ç§‘ç ”å¾…æ›´æ–°ï¼‰

ç”±äºç¯‡å¹…é™åˆ¶ï¼Œæ¯ä¸ªåˆ›æ–°ç‚¹çš„å…·ä½“åŸç†è®²è§£å°±ä¸ä¸€ä¸€å±•å¼€ï¼Œå…·ä½“è§ä¸‹åˆ—ç½‘å€ä¸­çš„åˆ›æ–°ç‚¹å¯¹åº”å­é¡¹ç›®çš„æŠ€æœ¯åŸç†åšå®¢ç½‘å€ã€Blogã€‘ï¼š

![9.png](9.png)

[8.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£é“¾æ¥](https://gitee.com/qunmasj/good)

### 9.ç³»ç»ŸåŠŸèƒ½å±•ç¤ºï¼ˆæ£€æµ‹å¯¹è±¡ä¸ºä¸¾ä¾‹ï¼Œå®é™…å†…å®¹ä»¥æœ¬é¡¹ç›®æ•°æ®é›†ä¸ºå‡†ï¼‰

å›¾9.1.ç³»ç»Ÿæ”¯æŒæ£€æµ‹ç»“æœè¡¨æ ¼æ˜¾ç¤º

  å›¾9.2.ç³»ç»Ÿæ”¯æŒç½®ä¿¡åº¦å’ŒIOUé˜ˆå€¼æ‰‹åŠ¨è°ƒèŠ‚

  å›¾9.3.ç³»ç»Ÿæ”¯æŒè‡ªå®šä¹‰åŠ è½½æƒé‡æ–‡ä»¶best.pt(éœ€è¦ä½ é€šè¿‡æ­¥éª¤5ä¸­è®­ç»ƒè·å¾—)

  å›¾9.4.ç³»ç»Ÿæ”¯æŒæ‘„åƒå¤´å®æ—¶è¯†åˆ«

  å›¾9.5.ç³»ç»Ÿæ”¯æŒå›¾ç‰‡è¯†åˆ«

  å›¾9.6.ç³»ç»Ÿæ”¯æŒè§†é¢‘è¯†åˆ«

  å›¾9.7.ç³»ç»Ÿæ”¯æŒè¯†åˆ«ç»“æœæ–‡ä»¶è‡ªåŠ¨ä¿å­˜

  å›¾9.8.ç³»ç»Ÿæ”¯æŒExcelå¯¼å‡ºæ£€æµ‹ç»“æœæ•°æ®

![10.png](10.png)

![11.png](11.png)

![12.png](12.png)

![13.png](13.png)

![14.png](14.png)

![15.png](15.png)

![16.png](16.png)

![17.png](17.png)

### 10.åŸå§‹YOLOV8ç®—æ³•åŸç†

åŸå§‹YOLOv8ç®—æ³•åŸç†

YOLOv8ç®—æ³•æ˜¯ç›®æ ‡æ£€æµ‹é¢†åŸŸçš„ä¸€é¡¹é‡è¦è¿›å±•ï¼Œç»§æ‰¿äº†YOLOç³»åˆ—æ¨¡å‹çš„ä¼˜è‰¯ä¼ ç»Ÿï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œäº†å¤šé¡¹åˆ›æ–°å’Œæ”¹è¿›ã€‚è‡ª2015å¹´YOLOæ¨¡å‹é¦–æ¬¡æå‡ºä»¥æ¥ï¼ŒYOLOç³»åˆ—å·²ç»å†äº†å¤šä¸ªç‰ˆæœ¬çš„è¿­ä»£ï¼Œæ¯ä¸ªç‰ˆæœ¬éƒ½åœ¨æ¨ç†é€Ÿåº¦ã€æ£€æµ‹ç²¾åº¦ã€è®­ç»ƒä¾¿æ·æ€§ä»¥åŠç¡¬ä»¶å…¼å®¹æ€§ç­‰æ–¹é¢è¿›è¡Œäº†ä¼˜åŒ–ã€‚YOLOv8ä½œä¸ºæœ€æ–°çš„ç‰ˆæœ¬ï¼Œå‡­å€Ÿå…¶å“è¶Šçš„æ€§èƒ½å’Œçµæ´»çš„åº”ç”¨ï¼Œè¿…é€Ÿæˆä¸ºä¸šç•Œå¹¿æ³›ä½¿ç”¨çš„ç›®æ ‡æ£€æµ‹æ¨¡å‹ã€‚

YOLOv8çš„ç½‘ç»œç»“æ„ä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šBackboneã€Neckå’ŒHeadã€‚Backboneè´Ÿè´£ç‰¹å¾æå–ï¼ŒNeckç”¨äºç‰¹å¾èåˆï¼Œè€ŒHeadåˆ™è´Ÿè´£æœ€ç»ˆçš„æ£€æµ‹è¾“å‡ºã€‚YOLOv8çš„Backboneé‡‡ç”¨äº†C2fæ¨¡å—ï¼Œè¿™ä¸€æ¨¡å—åœ¨YOLOv5çš„åŸºç¡€ä¸Šè¿›è¡Œäº†æ”¹è¿›ï¼Œå¢åŠ äº†æ›´å¤šçš„åˆ†æ”¯ä»¥ä¸°å¯Œæ¢¯åº¦å›ä¼ æ—¶çš„æ”¯æµã€‚è¿™ç§è®¾è®¡ä½¿å¾—ç½‘ç»œåœ¨æå–ç‰¹å¾æ—¶èƒ½å¤Ÿæ›´æœ‰æ•ˆåœ°æ•æ‰åˆ°å¤šå±‚æ¬¡çš„ä¿¡æ¯ï¼Œä»è€Œæé«˜äº†æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›ã€‚

åœ¨ç‰¹å¾èåˆæ–¹é¢ï¼ŒYOLOv8ä¾ç„¶é‡‡ç”¨äº†FPNï¼ˆFeature Pyramid Networkï¼‰å’ŒPANï¼ˆPath Aggregation Networkï¼‰ç»“æ„ï¼Œè¿™ä¸€ç»“æ„èƒ½å¤Ÿæœ‰æ•ˆåœ°å°†å¤šå°ºåº¦ä¿¡æ¯è¿›è¡Œèåˆï¼Œä½¿å¾—æ¨¡å‹åœ¨å¤„ç†ä¸åŒå¤§å°çš„ç›®æ ‡æ—¶è¡¨ç°å¾—æ›´åŠ å‡ºè‰²ã€‚FPNå’ŒPANçš„ç»“åˆä¸ä»…å¢å¼ºäº†ç‰¹å¾çš„ä¼ é€’èƒ½åŠ›ï¼Œè¿˜æå‡äº†æ¨¡å‹åœ¨å¤æ‚åœºæ™¯ä¸‹çš„é²æ£’æ€§ã€‚é€šè¿‡è¿™ç§ç»“æ„ï¼ŒYOLOv8èƒ½å¤Ÿåœ¨å¤šç§å°ºåº¦ä¸Šè¿›è¡Œç›®æ ‡æ£€æµ‹ï¼Œä»è€Œæé«˜äº†å¯¹å°ç›®æ ‡å’Œå¤§ç›®æ ‡çš„æ£€æµ‹ç²¾åº¦ã€‚

YOLOv8åœ¨Headéƒ¨åˆ†é‡‡ç”¨äº†è§£è€¦å¤´ï¼ˆDecoupled Headï¼‰ç»“æ„ï¼Œè¿™ä¸€ç»“æ„çš„è®¾è®¡çµæ„Ÿæ¥æºäºYOLOXã€‚è§£è€¦å¤´å°†åˆ†ç±»å’Œå®šä½ä»»åŠ¡åˆ†å¼€å¤„ç†ï¼Œåˆ†åˆ«é€šè¿‡ä¸¤æ¡å¹¶è¡Œçš„åˆ†æ”¯æå–ç±»åˆ«ç‰¹å¾å’Œä½ç½®ç‰¹å¾ã€‚è¿™æ ·çš„è®¾è®¡ä½¿å¾—æ¨¡å‹åœ¨è¿›è¡Œåˆ†ç±»å’Œå®šä½æ—¶èƒ½å¤Ÿæ›´ä¸“æ³¨äºå„è‡ªçš„ä»»åŠ¡ï¼Œä»è€Œæé«˜äº†æ£€æµ‹çš„å‡†ç¡®æ€§å’Œæ•ˆç‡ã€‚æ¯ä¸ªåˆ†æ”¯åé¢éƒ½æ¥æœ‰ä¸€å±‚1Ã—1çš„å·ç§¯ï¼Œç”¨äºæœ€ç»ˆçš„åˆ†ç±»å’Œå®šä½è¾“å‡ºï¼Œè¿™ç§è§£è€¦çš„æ–¹å¼ä½¿å¾—æ¨¡å‹åœ¨è®­ç»ƒæ—¶èƒ½å¤Ÿæ›´å¥½åœ°ä¼˜åŒ–å„è‡ªçš„æŸå¤±å‡½æ•°ã€‚

åœ¨æ ‡ç­¾åˆ†é…ç­–ç•¥ä¸Šï¼ŒYOLOv8å¼•å…¥äº†TOODï¼ˆTask-Oriented Object Detectionï¼‰ç­–ç•¥ï¼Œè¿™æ˜¯ä¸€ç§åŠ¨æ€æ ‡ç­¾åˆ†é…æ–¹æ³•ã€‚ä¸ä¹‹å‰ç‰ˆæœ¬ä¾èµ–äºå›ºå®šå€™é€‰æ¡†çš„ç­–ç•¥ä¸åŒï¼ŒTOODç­–ç•¥èƒ½å¤Ÿæ ¹æ®å½“å‰çš„é¢„æµ‹ç»“æœåŠ¨æ€è°ƒæ•´æ ‡ç­¾çš„åˆ†é…ã€‚è¿™ç§çµæ´»æ€§ä½¿å¾—YOLOv8åœ¨å¤„ç†å¤šæ ·åŒ–çš„æ•°æ®é›†æ—¶èƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”ç›®æ ‡çš„åˆ†å¸ƒç‰¹å¾ï¼Œä»è€Œæé«˜äº†æ­£è´Ÿæ ·æœ¬çš„åŒ¹é…ç²¾åº¦ã€‚YOLOv8çš„æŸå¤±å‡½æ•°ä¸»è¦ç”±ç±»åˆ«æŸå¤±å’Œä½ç½®æŸå¤±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œå…¶ä¸­ç±»åˆ«æŸå¤±é‡‡ç”¨äº†å˜ç„¦æŸå¤±ï¼ˆVarifocal Lossï¼‰ï¼Œè€Œä½ç½®æŸå¤±åˆ™ç»“åˆäº†CIoUï¼ˆComplete Intersection over Unionï¼‰å’ŒDFLï¼ˆDistributions Focal Lossï¼‰ä¸¤ç§å½¢å¼ã€‚è¿™ç§æŸå¤±å‡½æ•°çš„è®¾è®¡ä½¿å¾—æ¨¡å‹åœ¨è®­ç»ƒæ—¶èƒ½å¤Ÿæ›´å¥½åœ°å…³æ³¨é«˜è´¨é‡çš„æ­£æ ·æœ¬ï¼ŒåŒæ—¶æŠ‘åˆ¶ä½è´¨é‡è´Ÿæ ·æœ¬å¯¹æ•´ä½“æŸå¤±çš„å½±å“ï¼Œä»è€Œæé«˜äº†æ¨¡å‹çš„å­¦ä¹ æ•ˆç‡ã€‚

åœ¨æ•°æ®é¢„å¤„ç†æ–¹é¢ï¼ŒYOLOv8å»¶ç»­äº†YOLOv5çš„ç­–ç•¥ï¼Œé‡‡ç”¨äº†å¤šç§æ•°æ®å¢å¼ºæ‰‹æ®µï¼Œå¦‚é©¬èµ›å…‹å¢å¼ºã€æ··åˆå¢å¼ºã€ç©ºé—´æ‰°åŠ¨å’Œé¢œè‰²æ‰°åŠ¨ç­‰ã€‚è¿™äº›å¢å¼ºæ‰‹æ®µèƒ½å¤Ÿæœ‰æ•ˆåœ°æ‰©å……è®­ç»ƒæ•°æ®é›†çš„å¤šæ ·æ€§ï¼Œæé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼Œä½¿å¾—YOLOv8åœ¨é¢å¯¹ä¸åŒåœºæ™¯å’Œå…‰ç…§æ¡ä»¶æ—¶ä¾ç„¶èƒ½å¤Ÿä¿æŒè‰¯å¥½çš„æ£€æµ‹æ€§èƒ½ã€‚

YOLOv8çš„è®¾è®¡ä¸ä»…è€ƒè™‘äº†æ¨¡å‹çš„æ€§èƒ½ï¼Œè¿˜å…¼é¡¾äº†è®­ç»ƒçš„ä¾¿æ·æ€§å’Œçµæ´»æ€§ã€‚é€šè¿‡è®¾ç½®depth_factorã€width_factorå’Œratioç­‰å‚æ•°ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚è°ƒæ•´æ¨¡å‹çš„æ·±åº¦å’Œå®½åº¦ï¼Œä»è€Œåœ¨ä¸åŒçš„ç¡¬ä»¶ç¯å¢ƒä¸‹å®ç°æœ€ä½³çš„æ€§èƒ½è¡¨ç°ã€‚è¿™ç§çµæ´»çš„è®¾ç½®ä½¿å¾—YOLOv8èƒ½å¤Ÿå¹¿æ³›åº”ç”¨äºå„ç§å®é™…åœºæ™¯ä¸­ï¼Œå¦‚è‡ªåŠ¨é©¾é©¶ã€å®‰é˜²ç›‘æ§ã€å·¥ä¸šæ£€æµ‹ç­‰é¢†åŸŸã€‚

æ€»çš„æ¥è¯´ï¼ŒYOLOv8ä½œä¸ºYOLOç³»åˆ—çš„æœ€æ–°ç‰ˆæœ¬ï¼Œé›†æˆäº†å‰å‡ ä»£æ¨¡å‹çš„ä¼˜ç‚¹ï¼Œå¹¶åœ¨å¤šä¸ªæ–¹é¢è¿›è¡Œäº†åˆ›æ–°å’Œä¼˜åŒ–ã€‚å…¶é«˜æ•ˆçš„ç‰¹å¾æå–èƒ½åŠ›ã€çµæ´»çš„æ ‡ç­¾åˆ†é…ç­–ç•¥ã€è§£è€¦çš„æ£€æµ‹å¤´ç»“æ„ä»¥åŠä¸°å¯Œçš„æ•°æ®å¢å¼ºæ‰‹æ®µï¼Œä½¿å¾—YOLOv8åœ¨ç›®æ ‡æ£€æµ‹ä»»åŠ¡ä¸­è¡¨ç°å‡ºè‰²ã€‚éšç€YOLOv8çš„ä¸æ–­å‘å±•å’Œåº”ç”¨ï¼Œé¢„è®¡å°†ä¸ºç›®æ ‡æ£€æµ‹é¢†åŸŸå¸¦æ¥æ›´å¤šçš„åˆ›æ–°å’Œçªç ´ã€‚

![18.png](18.png)

### 11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰

#### 11.1 code\ultralytics\hub\auth.py

ä»¥ä¸‹æ˜¯å¯¹ç»™å®šä»£ç çš„æ ¸å¿ƒéƒ¨åˆ†è¿›è¡Œæç‚¼å’Œè¯¦ç»†æ³¨é‡Šçš„ç»“æœï¼š

```python
import requests  # å¯¼å…¥è¯·æ±‚åº“ï¼Œç”¨äºå‘é€HTTPè¯·æ±‚

# è®¤è¯ç±»ï¼Œç”¨äºç®¡ç†APIå¯†é’¥å’Œèº«ä»½éªŒè¯è¿‡ç¨‹
class Auth:
    id_token = api_key = model_key = False  # åˆå§‹åŒ–èº«ä»½ä»¤ç‰Œã€APIå¯†é’¥å’Œæ¨¡å‹å¯†é’¥

    def __init__(self, api_key="", verbose=False):
        """
        åˆå§‹åŒ–Authç±»ï¼Œæ¥å—å¯é€‰çš„APIå¯†é’¥ã€‚

        å‚æ•°:
            api_key (str, optional): APIå¯†é’¥æˆ–ç»„åˆçš„APIå¯†é’¥å’Œæ¨¡å‹ID
            verbose (bool): æ˜¯å¦è¾“å‡ºè¯¦ç»†ä¿¡æ¯
        """
        # å¤„ç†APIå¯†é’¥ï¼Œä¿ç•™APIå¯†é’¥éƒ¨åˆ†
        api_key = api_key.split("_")[0]
        self.api_key = api_key or SETTINGS.get("api_key", "")  # è®¾ç½®APIå¯†é’¥

        # å¦‚æœæä¾›äº†APIå¯†é’¥
        if self.api_key:
            # æ£€æŸ¥æä¾›çš„APIå¯†é’¥æ˜¯å¦ä¸è®¾ç½®ä¸­çš„å¯†é’¥åŒ¹é…
            if self.api_key == SETTINGS.get("api_key"):
                if verbose:
                    LOGGER.info("Authenticated âœ…")  # è®°å½•å·²è®¤è¯ä¿¡æ¯
                return
            else:
                success = self.authenticate()  # å°è¯•è®¤è¯
        # å¦‚æœæ²¡æœ‰æä¾›APIå¯†é’¥ä¸”åœ¨Google Colabç¯å¢ƒä¸­
        elif is_colab():
            success = self.auth_with_cookies()  # å°è¯•ä½¿ç”¨cookiesè®¤è¯
        else:
            success = self.request_api_key()  # è¯·æ±‚APIå¯†é’¥

        # æ›´æ–°è®¾ç½®ä¸­çš„APIå¯†é’¥
        if success:
            SETTINGS.update({"api_key": self.api_key})
            if verbose:
                LOGGER.info("New authentication successful âœ…")  # è®°å½•æ–°è®¤è¯æˆåŠŸä¿¡æ¯
        elif verbose:
            LOGGER.info(f"Retrieve API key from {API_KEY_URL}")  # æç¤ºè·å–APIå¯†é’¥çš„é“¾æ¥

    def request_api_key(self, max_attempts=3):
        """
        æç¤ºç”¨æˆ·è¾“å…¥APIå¯†é’¥ã€‚

        è¿”å›:
            bool: è®¤è¯æˆåŠŸè¿”å›True
        """
        import getpass  # å¯¼å…¥ç”¨äºå®‰å…¨è¾“å…¥çš„åº“

        for attempts in range(max_attempts):
            LOGGER.info(f"Login. Attempt {attempts + 1} of {max_attempts}")
            input_key = getpass.getpass("Enter API key from {API_KEY_URL} ")  # å®‰å…¨è¾“å…¥APIå¯†é’¥
            self.api_key = input_key.split("_")[0]  # ç§»é™¤æ¨¡å‹ID
            if self.authenticate():  # å°è¯•è®¤è¯
                return True
        raise ConnectionError("Failed to authenticate âŒ")  # è¶…è¿‡æœ€å¤§å°è¯•æ¬¡æ•°ï¼ŒæŠ›å‡ºå¼‚å¸¸

    def authenticate(self) -> bool:
        """
        å°è¯•ä½¿ç”¨APIå¯†é’¥è¿›è¡Œè®¤è¯ã€‚

        è¿”å›:
            bool: è®¤è¯æˆåŠŸè¿”å›Trueï¼Œå¤±è´¥è¿”å›False
        """
        try:
            header = self.get_auth_header()  # è·å–è®¤è¯å¤´
            if header:
                r = requests.post(f"{HUB_API_ROOT}/v1/auth", headers=header)  # å‘é€è®¤è¯è¯·æ±‚
                if not r.json().get("success", False):
                    raise ConnectionError("Unable to authenticate.")  # è®¤è¯å¤±è´¥
                return True
            raise ConnectionError("User has not authenticated locally.")  # æœ¬åœ°æœªè®¤è¯
        except ConnectionError:
            self.id_token = self.api_key = False  # é‡ç½®æ— æ•ˆçš„å¯†é’¥
            LOGGER.warning("Invalid API key âš ï¸")  # è®°å½•æ— æ•ˆå¯†é’¥è­¦å‘Š
            return False

    def auth_with_cookies(self) -> bool:
        """
        å°è¯•é€šè¿‡cookiesè¿›è¡Œè®¤è¯ã€‚

        è¿”å›:
            bool: è®¤è¯æˆåŠŸè¿”å›Trueï¼Œå¤±è´¥è¿”å›False
        """
        if not is_colab():
            return False  # ä»…åœ¨Colabä¸­æœ‰æ•ˆ
        try:
            authn = request_with_credentials(f"{HUB_API_ROOT}/v1/auth/auto")  # è·å–è®¤è¯ä¿¡æ¯
            if authn.get("success", False):
                self.id_token = authn.get("data", {}).get("idToken", None)  # è®¾ç½®èº«ä»½ä»¤ç‰Œ
                self.authenticate()  # å°è¯•è®¤è¯
                return True
            raise ConnectionError("Unable to fetch browser authentication details.")  # è·å–è®¤è¯ä¿¡æ¯å¤±è´¥
        except ConnectionError:
            self.id_token = False  # é‡ç½®æ— æ•ˆçš„èº«ä»½ä»¤ç‰Œ
            return False

    def get_auth_header(self):
        """
        è·å–ç”¨äºAPIè¯·æ±‚çš„è®¤è¯å¤´ã€‚

        è¿”å›:
            dict: å¦‚æœè®¾ç½®äº†èº«ä»½ä»¤ç‰Œæˆ–APIå¯†é’¥ï¼Œåˆ™è¿”å›è®¤è¯å¤´ï¼Œå¦åˆ™è¿”å›None
        """
        if self.id_token:
            return {"authorization": f"Bearer {self.id_token}"}  # ä½¿ç”¨èº«ä»½ä»¤ç‰Œ
        elif self.api_key:
            return {"x-api-key": self.api_key}  # ä½¿ç”¨APIå¯†é’¥
        return None  # è¿”å›None
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†è¯´æ˜ï¼š
1. **Authç±»**ï¼šè´Ÿè´£ç®¡ç†APIå¯†é’¥å’Œèº«ä»½éªŒè¯è¿‡ç¨‹ï¼Œæ”¯æŒå¤šç§è®¤è¯æ–¹å¼ã€‚
2. **__init__æ–¹æ³•**ï¼šåˆå§‹åŒ–Authç±»ï¼Œå¤„ç†APIå¯†é’¥å¹¶å°è¯•è¿›è¡Œè®¤è¯ã€‚
3. **request_api_keyæ–¹æ³•**ï¼šæç¤ºç”¨æˆ·è¾“å…¥APIå¯†é’¥ï¼Œå¹¶è¿›è¡Œè®¤è¯ã€‚
4. **authenticateæ–¹æ³•**ï¼šä½¿ç”¨APIå¯†é’¥æˆ–èº«ä»½ä»¤ç‰Œè¿›è¡Œè®¤è¯ã€‚
5. **auth_with_cookiesæ–¹æ³•**ï¼šé€šè¿‡æµè§ˆå™¨cookiesè¿›è¡Œè®¤è¯ï¼Œé€‚ç”¨äºGoogle Colabã€‚
6. **get_auth_headeræ–¹æ³•**ï¼šç”Ÿæˆç”¨äºAPIè¯·æ±‚çš„è®¤è¯å¤´ã€‚

ä»¥ä¸Šæ˜¯å¯¹ä»£ç çš„æ ¸å¿ƒéƒ¨åˆ†è¿›è¡Œäº†æç‚¼å’Œè¯¦ç»†æ³¨é‡Šï¼Œæ—¨åœ¨å¸®åŠ©ç†è§£å…¶åŠŸèƒ½å’Œå·¥ä½œåŸç†ã€‚

è¿™ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ªç”¨äºç®¡ç†èº«ä»½éªŒè¯çš„ç±»ï¼Œä¸»è¦ç”¨äºå¤„ç†APIå¯†é’¥ã€åŸºäºcookieçš„èº«ä»½éªŒè¯ä»¥åŠç”Ÿæˆè¯·æ±‚å¤´ã€‚å®ƒå±äºUltralytics YOLOé¡¹ç›®ï¼Œä½¿ç”¨AGPL-3.0è®¸å¯è¯ã€‚

åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œé¦–å…ˆå¯¼å…¥äº†ä¸€äº›å¿…è¦çš„åº“å’Œæ¨¡å—ï¼ŒåŒ…æ‹¬requestsåº“ä»¥åŠä¸€äº›æ¥è‡ªUltralyticsçš„å·¥å…·å‡½æ•°å’Œå¸¸é‡ã€‚ç„¶åå®šä¹‰äº†ä¸€ä¸ªåä¸º`Auth`çš„ç±»ï¼Œè¯¥ç±»çš„ä¸»è¦åŠŸèƒ½æ˜¯å¤„ç†ç”¨æˆ·çš„èº«ä»½éªŒè¯è¿‡ç¨‹ã€‚

`Auth`ç±»æœ‰å‡ ä¸ªé‡è¦çš„å±æ€§ï¼ŒåŒ…æ‹¬`id_token`ã€`api_key`å’Œ`model_key`ï¼Œå®ƒä»¬çš„åˆå§‹å€¼éƒ½è®¾ä¸ºFalseã€‚æ„é€ å‡½æ•°`__init__`æ¥å—ä¸€ä¸ªå¯é€‰çš„APIå¯†é’¥å‚æ•°ï¼Œå¹¶æ ¹æ®ä¼ å…¥çš„å€¼æˆ–è®¾ç½®ä¸­çš„å€¼åˆå§‹åŒ–`api_key`å±æ€§ã€‚å¦‚æœæä¾›äº†APIå¯†é’¥ï¼Œç±»ä¼šæ£€æŸ¥è¯¥å¯†é’¥æ˜¯å¦ä¸è®¾ç½®ä¸­çš„å¯†é’¥åŒ¹é…ã€‚å¦‚æœåŒ¹é…ï¼Œåˆ™è®°å½•ç”¨æˆ·å·²ç™»å½•çš„ä¿¡æ¯ï¼›å¦‚æœä¸åŒ¹é…ï¼Œåˆ™å°è¯•ä½¿ç”¨è¯¥å¯†é’¥è¿›è¡Œèº«ä»½éªŒè¯ã€‚å¦‚æœæ²¡æœ‰æä¾›APIå¯†é’¥å¹¶ä¸”å½“å‰ç¯å¢ƒæ˜¯Google Colabï¼Œåˆ™å°è¯•é€šè¿‡æµè§ˆå™¨cookieè¿›è¡Œèº«ä»½éªŒè¯ï¼›å¦åˆ™ï¼Œæç¤ºç”¨æˆ·è¾“å…¥APIå¯†é’¥ã€‚

`request_api_key`æ–¹æ³•ç”¨äºæç¤ºç”¨æˆ·è¾“å…¥APIå¯†é’¥ï¼Œæœ€å¤šå…è®¸ä¸‰æ¬¡å°è¯•ã€‚å¦‚æœç”¨æˆ·è¾“å…¥çš„å¯†é’¥èƒ½å¤ŸæˆåŠŸé€šè¿‡èº«ä»½éªŒè¯ï¼Œåˆ™è¿”å›Trueï¼›å¦åˆ™æŠ›å‡ºè¿æ¥é”™è¯¯ã€‚

`authenticate`æ–¹æ³•å°è¯•ä½¿ç”¨`id_token`æˆ–`api_key`ä¸æœåŠ¡å™¨è¿›è¡Œèº«ä»½éªŒè¯ã€‚å¦‚æœèº«ä»½éªŒè¯æˆåŠŸï¼Œè¿”å›Trueï¼›å¦åˆ™è¿”å›Falseï¼Œå¹¶é‡ç½®æ— æ•ˆçš„å¯†é’¥ã€‚

`auth_with_cookies`æ–¹æ³•ä¸“é—¨ç”¨äºåœ¨Google Colabç¯å¢ƒä¸­é€šè¿‡æµè§ˆå™¨cookieè¿›è¡Œèº«ä»½éªŒè¯ã€‚å¦‚æœæˆåŠŸè·å–åˆ°èº«ä»½éªŒè¯ä¿¡æ¯ï¼Œåˆ™è®¾ç½®`id_token`å¹¶è°ƒç”¨`authenticate`æ–¹æ³•è¿›è¡Œè¿›ä¸€æ­¥éªŒè¯ã€‚

æœ€åï¼Œ`get_auth_header`æ–¹æ³•ç”¨äºç”ŸæˆAPIè¯·æ±‚æ‰€éœ€çš„èº«ä»½éªŒè¯å¤´ã€‚å¦‚æœè®¾ç½®äº†`id_token`ï¼Œåˆ™è¿”å›åŒ…å«Bearerä»¤ç‰Œçš„å¤´éƒ¨ï¼›å¦‚æœè®¾ç½®äº†`api_key`ï¼Œåˆ™è¿”å›åŒ…å«APIå¯†é’¥çš„å¤´éƒ¨ï¼›å¦‚æœä¸¤è€…éƒ½æœªè®¾ç½®ï¼Œåˆ™è¿”å›Noneã€‚

æ€»ä½“è€Œè¨€ï¼Œè¿™ä¸ªæ–‡ä»¶æä¾›äº†ä¸€ç§çµæ´»çš„èº«ä»½éªŒè¯æœºåˆ¶ï¼Œæ”¯æŒå¤šç§æ–¹å¼ä»¥ç¡®ä¿ç”¨æˆ·èƒ½å¤Ÿå®‰å…¨åœ°è®¿é—®Ultralyticsçš„APIã€‚

#### 11.2 code\ultralytics\trackers\basetrack.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å¹¶æ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
# Ultralytics YOLO ğŸš€, AGPL-3.0 license
"""è¯¥æ¨¡å—å®šä¹‰äº†YOLOä¸­å¯¹è±¡è·Ÿè¸ªçš„åŸºæœ¬ç±»å’Œç»“æ„ã€‚"""

from collections import OrderedDict
import numpy as np

class TrackState:
    """
    è¡¨ç¤ºè¢«è·Ÿè¸ªå¯¹è±¡å¯èƒ½çŠ¶æ€çš„æšä¸¾ç±»ã€‚

    å±æ€§ï¼š
        New (int): æ–°æ£€æµ‹åˆ°çš„å¯¹è±¡çŠ¶æ€ã€‚
        Tracked (int): åœ¨åç»­å¸§ä¸­æˆåŠŸè·Ÿè¸ªçš„çŠ¶æ€ã€‚
        Lost (int): ä¸å†è¢«è·Ÿè¸ªçš„çŠ¶æ€ã€‚
        Removed (int): ä»è·Ÿè¸ªä¸­ç§»é™¤çš„çŠ¶æ€ã€‚
    """
    New = 0
    Tracked = 1
    Lost = 2
    Removed = 3


class BaseTrack:
    """
    å¯¹è±¡è·Ÿè¸ªçš„åŸºç±»ï¼Œæä¾›åŸºç¡€å±æ€§å’Œæ–¹æ³•ã€‚

    å±æ€§ï¼š
        _count (int): ç±»çº§åˆ«çš„å”¯ä¸€è·Ÿè¸ªIDè®¡æ•°å™¨ã€‚
        track_id (int): è·Ÿè¸ªçš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚
        is_activated (bool): æ ‡å¿—ï¼ŒæŒ‡ç¤ºè·Ÿè¸ªæ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚
        state (TrackState): å½“å‰è·Ÿè¸ªçŠ¶æ€ã€‚
        history (OrderedDict): è·Ÿè¸ªçŠ¶æ€çš„æœ‰åºå†å²è®°å½•ã€‚
        features (list): ä»å¯¹è±¡ä¸­æå–çš„ç”¨äºè·Ÿè¸ªçš„ç‰¹å¾åˆ—è¡¨ã€‚
        curr_feature (any): å½“å‰è¢«è·Ÿè¸ªå¯¹è±¡çš„ç‰¹å¾ã€‚
        score (float): è·Ÿè¸ªçš„ç½®ä¿¡åº¦åˆ†æ•°ã€‚
        start_frame (int): å¼€å§‹è·Ÿè¸ªçš„å¸§ç¼–å·ã€‚
        frame_id (int): æœ€è¿‘å¤„ç†çš„å¸§IDã€‚
        time_since_update (int): è‡ªä¸Šæ¬¡æ›´æ–°ä»¥æ¥ç»è¿‡çš„å¸§æ•°ã€‚
        location (tuple): åœ¨å¤šæ‘„åƒå¤´è·Ÿè¸ªä¸­çš„å¯¹è±¡ä½ç½®ã€‚

    æ–¹æ³•ï¼š
        end_frame: è¿”å›å¯¹è±¡æœ€åè¢«è·Ÿè¸ªçš„å¸§IDã€‚
        next_id: å¢åŠ å¹¶è¿”å›ä¸‹ä¸€ä¸ªå…¨å±€è·Ÿè¸ªIDã€‚
        activate: æ¿€æ´»è·Ÿè¸ªçš„æŠ½è±¡æ–¹æ³•ã€‚
        predict: é¢„æµ‹è·Ÿè¸ªä¸‹ä¸€ä¸ªçŠ¶æ€çš„æŠ½è±¡æ–¹æ³•ã€‚
        update: ä½¿ç”¨æ–°æ•°æ®æ›´æ–°è·Ÿè¸ªçš„æŠ½è±¡æ–¹æ³•ã€‚
        mark_lost: å°†è·Ÿè¸ªæ ‡è®°ä¸ºä¸¢å¤±ã€‚
        mark_removed: å°†è·Ÿè¸ªæ ‡è®°ä¸ºç§»é™¤ã€‚
        reset_id: é‡ç½®å…¨å±€è·Ÿè¸ªIDè®¡æ•°å™¨ã€‚
    """

    _count = 0  # ç±»çº§åˆ«çš„è®¡æ•°å™¨ï¼Œç”¨äºç”Ÿæˆå”¯ä¸€çš„è·Ÿè¸ªID

    def __init__(self):
        """åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„è·Ÿè¸ªå¯¹è±¡ï¼Œåˆ†é…å”¯ä¸€IDå’ŒåŸºç¡€è·Ÿè¸ªå±æ€§ã€‚"""
        self.track_id = 0  # è·Ÿè¸ªID
        self.is_activated = False  # è·Ÿè¸ªæ˜¯å¦æ¿€æ´»çš„æ ‡å¿—
        self.state = TrackState.New  # åˆå§‹çŠ¶æ€ä¸ºæ–°æ£€æµ‹
        self.history = OrderedDict()  # è·Ÿè¸ªçŠ¶æ€çš„å†å²è®°å½•
        self.features = []  # ç‰¹å¾åˆ—è¡¨
        self.curr_feature = None  # å½“å‰ç‰¹å¾
        self.score = 0  # è·Ÿè¸ªç½®ä¿¡åº¦åˆ†æ•°
        self.start_frame = 0  # å¼€å§‹è·Ÿè¸ªçš„å¸§
        self.frame_id = 0  # æœ€è¿‘å¤„ç†çš„å¸§ID
        self.time_since_update = 0  # è‡ªä¸Šæ¬¡æ›´æ–°ä»¥æ¥çš„å¸§æ•°
        self.location = (np.inf, np.inf)  # å¯¹è±¡ä½ç½®åˆå§‹åŒ–ä¸ºæ— ç©·å¤§

    @property
    def end_frame(self):
        """è¿”å›è·Ÿè¸ªçš„æœ€åå¸§IDã€‚"""
        return self.frame_id

    @staticmethod
    def next_id():
        """å¢åŠ å¹¶è¿”å›å…¨å±€è·Ÿè¸ªIDè®¡æ•°å™¨ã€‚"""
        BaseTrack._count += 1
        return BaseTrack._count

    def activate(self, *args):
        """æ¿€æ´»è·Ÿè¸ªçš„æŠ½è±¡æ–¹æ³•ï¼Œéœ€åœ¨å­ç±»ä¸­å®ç°ã€‚"""
        raise NotImplementedError

    def predict(self):
        """é¢„æµ‹è·Ÿè¸ªä¸‹ä¸€ä¸ªçŠ¶æ€çš„æŠ½è±¡æ–¹æ³•ï¼Œéœ€åœ¨å­ç±»ä¸­å®ç°ã€‚"""
        raise NotImplementedError

    def update(self, *args, **kwargs):
        """ä½¿ç”¨æ–°è§‚å¯Ÿæ•°æ®æ›´æ–°è·Ÿè¸ªçš„æŠ½è±¡æ–¹æ³•ï¼Œéœ€åœ¨å­ç±»ä¸­å®ç°ã€‚"""
        raise NotImplementedError

    def mark_lost(self):
        """å°†è·Ÿè¸ªæ ‡è®°ä¸ºä¸¢å¤±ã€‚"""
        self.state = TrackState.Lost

    def mark_removed(self):
        """å°†è·Ÿè¸ªæ ‡è®°ä¸ºç§»é™¤ã€‚"""
        self.state = TrackState.Removed

    @staticmethod
    def reset_id():
        """é‡ç½®å…¨å±€è·Ÿè¸ªIDè®¡æ•°å™¨ã€‚"""
        BaseTrack._count = 0
```

### ä»£ç è¯´æ˜ï¼š
1. **TrackState ç±»**ï¼šå®šä¹‰äº†è·Ÿè¸ªå¯¹è±¡çš„ä¸åŒçŠ¶æ€ï¼ŒåŒ…æ‹¬æ–°æ£€æµ‹ã€æˆåŠŸè·Ÿè¸ªã€ä¸¢å¤±å’Œç§»é™¤ã€‚
2. **BaseTrack ç±»**ï¼šæ˜¯ä¸€ä¸ªåŸºç±»ï¼ŒåŒ…å«äº†è·Ÿè¸ªå¯¹è±¡çš„åŸºæœ¬å±æ€§å’Œæ–¹æ³•ã€‚å®ƒç®¡ç†è·Ÿè¸ªçš„çŠ¶æ€ã€ç‰¹å¾ã€ç½®ä¿¡åº¦ç­‰ä¿¡æ¯ã€‚
3. **æ„é€ å‡½æ•° `__init__`**ï¼šåˆå§‹åŒ–è·Ÿè¸ªå¯¹è±¡çš„å„é¡¹å±æ€§ï¼Œç¡®ä¿æ¯ä¸ªå¯¹è±¡éƒ½æœ‰å”¯ä¸€çš„IDå’Œåˆå§‹çŠ¶æ€ã€‚
4. **`next_id` æ–¹æ³•**ï¼šç”¨äºç”Ÿæˆå”¯ä¸€çš„è·Ÿè¸ªIDï¼Œç¡®ä¿æ¯ä¸ªè·Ÿè¸ªå¯¹è±¡éƒ½æœ‰ä¸åŒçš„æ ‡è¯†ç¬¦ã€‚
5. **çŠ¶æ€æ ‡è®°æ–¹æ³•**ï¼š`mark_lost` å’Œ `mark_removed` ç”¨äºæ›´æ–°è·Ÿè¸ªçŠ¶æ€ï¼ŒæŒ‡ç¤ºå¯¹è±¡æ˜¯å¦ä¸¢å¤±æˆ–è¢«ç§»é™¤ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªç”¨äºç›®æ ‡è·Ÿè¸ªçš„åŸºç¡€ç±»å’Œç›¸å…³ç»“æ„ï¼Œä¸»è¦ç”¨äºYOLOï¼ˆYou Only Look Onceï¼‰ç›®æ ‡æ£€æµ‹æ¨¡å‹çš„è·Ÿè¸ªæ¨¡å—ã€‚æ–‡ä»¶ä¸­åŒ…å«äº†ä¸¤ä¸ªä¸»è¦çš„ç±»ï¼š`TrackState`å’Œ`BaseTrack`ã€‚

`TrackState`ç±»æ˜¯ä¸€ä¸ªæšä¸¾ç±»ï¼Œç”¨äºè¡¨ç¤ºè¢«è·Ÿè¸ªå¯¹è±¡çš„å¯èƒ½çŠ¶æ€ã€‚å®ƒå®šä¹‰äº†å››ç§çŠ¶æ€ï¼š`New`è¡¨ç¤ºå¯¹è±¡æ˜¯æ–°æ£€æµ‹åˆ°çš„ï¼Œ`Tracked`è¡¨ç¤ºå¯¹è±¡åœ¨åç»­å¸§ä¸­æˆåŠŸè¢«è·Ÿè¸ªï¼Œ`Lost`è¡¨ç¤ºå¯¹è±¡ä¸å†è¢«è·Ÿè¸ªï¼Œ`Removed`è¡¨ç¤ºå¯¹è±¡å·²ä»è·Ÿè¸ªä¸­ç§»é™¤ã€‚

`BaseTrack`ç±»æ˜¯ä¸€ä¸ªç›®æ ‡è·Ÿè¸ªçš„åŸºç¡€ç±»ï¼Œæä¾›äº†ä¸€äº›åŸºæœ¬çš„å±æ€§å’Œæ–¹æ³•ã€‚è¯¥ç±»ä¸­åŒ…å«äº†ä¸€äº›ç”¨äºè·Ÿè¸ªçš„æ ¸å¿ƒå±æ€§ï¼Œå¦‚`track_id`ï¼ˆè·Ÿè¸ªçš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼‰ã€`is_activated`ï¼ˆæŒ‡ç¤ºè·Ÿè¸ªæ˜¯å¦å¤„äºæ¿€æ´»çŠ¶æ€çš„æ ‡å¿—ï¼‰ã€`state`ï¼ˆå½“å‰è·Ÿè¸ªçŠ¶æ€ï¼‰ã€`history`ï¼ˆè·Ÿè¸ªçŠ¶æ€çš„æœ‰åºå†å²è®°å½•ï¼‰ã€`features`ï¼ˆä»å¯¹è±¡ä¸­æå–çš„ç‰¹å¾åˆ—è¡¨ï¼‰ã€`curr_feature`ï¼ˆå½“å‰è¢«è·Ÿè¸ªå¯¹è±¡çš„ç‰¹å¾ï¼‰ã€`score`ï¼ˆè·Ÿè¸ªçš„ç½®ä¿¡åº¦åˆ†æ•°ï¼‰ã€`start_frame`ï¼ˆè·Ÿè¸ªå¼€å§‹çš„å¸§å·ï¼‰ã€`frame_id`ï¼ˆæœ€è¿‘å¤„ç†çš„å¸§IDï¼‰ã€`time_since_update`ï¼ˆè‡ªä¸Šæ¬¡æ›´æ–°ä»¥æ¥ç»è¿‡çš„å¸§æ•°ï¼‰ä»¥åŠ`location`ï¼ˆåœ¨å¤šæ‘„åƒå¤´è·Ÿè¸ªä¸­çš„å¯¹è±¡ä½ç½®ï¼‰ã€‚

åœ¨`BaseTrack`ç±»ä¸­ï¼Œ`end_frame`å±æ€§è¿”å›è·Ÿè¸ªçš„æœ€åä¸€å¸§IDï¼Œ`next_id`é™æ€æ–¹æ³•ç”¨äºé€’å¢å¹¶è¿”å›å…¨å±€è·Ÿè¸ªIDè®¡æ•°å™¨ã€‚ç±»ä¸­è¿˜å®šä¹‰äº†ä¸€äº›æŠ½è±¡æ–¹æ³•ï¼Œå¦‚`activate`ã€`predict`å’Œ`update`ï¼Œè¿™äº›æ–¹æ³•éœ€è¦åœ¨å­ç±»ä¸­å®ç°ï¼Œä»¥ä¾¿æ¿€æ´»è·Ÿè¸ªã€é¢„æµ‹ä¸‹ä¸€ä¸ªçŠ¶æ€å’Œæ›´æ–°è·Ÿè¸ªæ•°æ®ã€‚æ­¤å¤–ï¼Œ`mark_lost`å’Œ`mark_removed`æ–¹æ³•ç”¨äºå°†è·Ÿè¸ªçŠ¶æ€æ ‡è®°ä¸ºä¸¢å¤±æˆ–ç§»é™¤ã€‚æœ€åï¼Œ`reset_id`é™æ€æ–¹æ³•ç”¨äºé‡ç½®å…¨å±€è·Ÿè¸ªIDè®¡æ•°å™¨ã€‚

æ€»ä½“è€Œè¨€ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸ºYOLOç›®æ ‡æ£€æµ‹æ¨¡å‹çš„è·Ÿè¸ªåŠŸèƒ½æä¾›äº†ä¸€ä¸ªåŸºç¡€æ¡†æ¶ï¼Œå…è®¸å¼€å‘è€…åœ¨æ­¤åŸºç¡€ä¸Šæ‰©å±•å’Œå®ç°å…·ä½“çš„è·Ÿè¸ªç®—æ³•ã€‚

#### 11.3 ui.py

```python
import sys
import subprocess

def run_script(script_path):
    """
    ä½¿ç”¨å½“å‰ Python ç¯å¢ƒè¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚

    Args:
        script_path (str): è¦è¿è¡Œçš„è„šæœ¬è·¯å¾„

    Returns:
        None
    """
    # è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„
    python_path = sys.executable

    # æ„å»ºè¿è¡Œå‘½ä»¤
    command = f'"{python_path}" -m streamlit run "{script_path}"'

    # æ‰§è¡Œå‘½ä»¤
    result = subprocess.run(command, shell=True)
    if result.returncode != 0:
        print("è„šæœ¬è¿è¡Œå‡ºé”™ã€‚")


# å®ä¾‹åŒ–å¹¶è¿è¡Œåº”ç”¨
if __name__ == "__main__":
    # æŒ‡å®šæ‚¨çš„è„šæœ¬è·¯å¾„
    script_path = "web.py"  # è¿™é‡Œå¯ä»¥ç›´æ¥æŒ‡å®šè„šæœ¬åç§°

    # è¿è¡Œè„šæœ¬
    run_script(script_path)
```

### ä»£ç æ³¨é‡Šè¯´æ˜ï¼š

1. **å¯¼å…¥æ¨¡å—**ï¼š
   - `import sys`ï¼šå¯¼å…¥ç³»ç»Ÿç›¸å…³çš„æ¨¡å—ï¼Œç”¨äºè·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ã€‚
   - `import subprocess`ï¼šå¯¼å…¥å­è¿›ç¨‹æ¨¡å—ï¼Œç”¨äºåœ¨ Python ä¸­æ‰§è¡Œå¤–éƒ¨å‘½ä»¤ã€‚

2. **å®šä¹‰ `run_script` å‡½æ•°**ï¼š
   - è¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‚æ•° `script_path`ï¼Œè¡¨ç¤ºè¦è¿è¡Œçš„ Python è„šæœ¬çš„è·¯å¾„ã€‚
   - å‡½æ•°å†…éƒ¨é¦–å…ˆè·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ï¼Œå­˜å‚¨åœ¨ `python_path` å˜é‡ä¸­ã€‚
   - ç„¶åæ„å»ºä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸² `command`ï¼Œè¯¥å‘½ä»¤ç”¨äºè¿è¡ŒæŒ‡å®šçš„è„šæœ¬ï¼Œä½¿ç”¨ `streamlit` æ¨¡å—ã€‚
   - ä½¿ç”¨ `subprocess.run` æ–¹æ³•æ‰§è¡Œå‘½ä»¤ï¼Œå¹¶å°† `shell` å‚æ•°è®¾ç½®ä¸º `True`ï¼Œå…è®¸åœ¨ shell ä¸­æ‰§è¡Œå‘½ä»¤ã€‚
   - å¦‚æœå‘½ä»¤æ‰§è¡Œè¿”å›çš„çŠ¶æ€ç ä¸ä¸º 0ï¼Œè¡¨ç¤ºè„šæœ¬è¿è¡Œå‡ºé”™ï¼Œæ‰“å°é”™è¯¯ä¿¡æ¯ã€‚

3. **ä¸»ç¨‹åºå…¥å£**ï¼š
   - ä½¿ç”¨ `if __name__ == "__main__":` ç¡®ä¿è¯¥éƒ¨åˆ†ä»£ç ä»…åœ¨ç›´æ¥è¿è¡Œè¯¥è„šæœ¬æ—¶æ‰§è¡Œã€‚
   - æŒ‡å®šè¦è¿è¡Œçš„è„šæœ¬è·¯å¾„ `script_path`ï¼Œè¿™é‡Œå¯ä»¥ç›´æ¥ä½¿ç”¨è„šæœ¬åç§°ã€‚
   - è°ƒç”¨ `run_script` å‡½æ•°ï¼Œä¼ å…¥æŒ‡å®šçš„è„šæœ¬è·¯å¾„ï¼Œå¼€å§‹æ‰§è¡Œè¯¥è„šæœ¬ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½æ˜¯ä½¿ç”¨å½“å‰çš„ Python ç¯å¢ƒæ¥è¿è¡Œä¸€ä¸ªæŒ‡å®šçš„è„šæœ¬ï¼Œå…·ä½“æ¥è¯´æ˜¯ä¸€ä¸ªåä¸º `web.py` çš„è„šæœ¬ã€‚ç¨‹åºé¦–å…ˆå¯¼å…¥äº†å¿…è¦çš„æ¨¡å—ï¼ŒåŒ…æ‹¬ `sys`ã€`os` å’Œ `subprocess`ï¼Œè¿™äº›æ¨¡å—æä¾›äº†ä¸ç³»ç»Ÿäº¤äº’å’Œæ‰§è¡Œå¤–éƒ¨å‘½ä»¤çš„åŠŸèƒ½ã€‚æ­¤å¤–ï¼Œè¿˜å¯¼å…¥äº† `abs_path` å‡½æ•°ï¼Œç”¨äºè·å–æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€‚

åœ¨ `run_script` å‡½æ•°ä¸­ï¼Œé¦–å…ˆè·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ï¼Œè¿™é€šè¿‡ `sys.executable` å®ç°ã€‚æ¥ç€ï¼Œæ„å»ºä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå‘½ä»¤ä½¿ç”¨ `streamlit` æ¥è¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚å‘½ä»¤çš„æ ¼å¼æ˜¯å°† Python è§£é‡Šå™¨è·¯å¾„å’Œè„šæœ¬è·¯å¾„ç»„åˆåœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„å‘½ä»¤ã€‚

éšåï¼Œä½¿ç”¨ `subprocess.run` å‡½æ•°æ¥æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ã€‚`shell=True` å‚æ•°å…è®¸åœ¨ shell ä¸­æ‰§è¡Œå‘½ä»¤ï¼Œè¿™æ ·å¯ä»¥å¤„ç†å¤æ‚çš„å‘½ä»¤è¡Œè¯­æ³•ã€‚å¦‚æœå‘½ä»¤æ‰§è¡Œåè¿”å›çš„çŠ¶æ€ç ä¸ä¸ºé›¶ï¼Œè¡¨ç¤ºè„šæœ¬è¿è¡Œè¿‡ç¨‹ä¸­å‡ºç°äº†é”™è¯¯ï¼Œç¨‹åºä¼šæ‰“å°å‡ºä¸€æ¡é”™è¯¯ä¿¡æ¯ã€‚

åœ¨æ–‡ä»¶çš„æœ€åéƒ¨åˆ†ï¼Œä½¿ç”¨ `if __name__ == "__main__":` è¯­å¥æ¥ç¡®ä¿åªæœ‰åœ¨ç›´æ¥è¿è¡Œè¯¥æ–‡ä»¶æ—¶æ‰ä¼šæ‰§è¡Œåé¢çš„ä»£ç ã€‚è¿™é‡ŒæŒ‡å®šäº†è¦è¿è¡Œçš„è„šæœ¬è·¯å¾„ï¼Œå³ `web.py`ï¼Œå¹¶è°ƒç”¨ `run_script` å‡½æ•°æ¥æ‰§è¡Œè¿™ä¸ªè„šæœ¬ã€‚

æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªç¨‹åºçš„åŠŸèƒ½æ˜¯ç®€åŒ–äº†ä½¿ç”¨ Python ç¯å¢ƒè¿è¡Œ `web.py` è„šæœ¬çš„è¿‡ç¨‹ï¼Œå¹¶æä¾›äº†åŸºæœ¬çš„é”™è¯¯å¤„ç†æœºåˆ¶ã€‚

#### 11.4 code\ultralytics\models\rtdetr\train.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å’Œæ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
# å¯¼å…¥å¿…è¦çš„åº“
from copy import copy
import torch
from ultralytics.models.yolo.detect import DetectionTrainer
from ultralytics.nn.tasks import RTDETRDetectionModel
from ultralytics.utils import RANK, colorstr
from .val import RTDETRDataset, RTDETRValidator

class RTDETRTrainer(DetectionTrainer):
    """
    RT-DETRæ¨¡å‹çš„è®­ç»ƒç±»ï¼Œç»§æ‰¿è‡ªYOLOçš„DetectionTrainerç±»ã€‚
    RT-DETRæ˜¯ç™¾åº¦å¼€å‘çš„å®æ—¶ç›®æ ‡æ£€æµ‹æ¨¡å‹ï¼Œåˆ©ç”¨è§†è§‰å˜æ¢å™¨ï¼ˆVision Transformersï¼‰å®ç°ç›®æ ‡æ£€æµ‹ã€‚
    """

    def get_model(self, cfg=None, weights=None, verbose=True):
        """
        åˆå§‹åŒ–å¹¶è¿”å›ä¸€ä¸ªRT-DETRæ¨¡å‹ç”¨äºç›®æ ‡æ£€æµ‹ä»»åŠ¡ã€‚

        å‚æ•°:
            cfg (dict, optional): æ¨¡å‹é…ç½®ï¼Œé»˜è®¤ä¸ºNoneã€‚
            weights (str, optional): é¢„è®­ç»ƒæ¨¡å‹æƒé‡çš„è·¯å¾„ï¼Œé»˜è®¤ä¸ºNoneã€‚
            verbose (bool): æ˜¯å¦å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼Œé»˜è®¤ä¸ºTrueã€‚

        è¿”å›:
            (RTDETRDetectionModel): åˆå§‹åŒ–åçš„æ¨¡å‹ã€‚
        """
        # åˆ›å»ºRT-DETRæ£€æµ‹æ¨¡å‹å®ä¾‹
        model = RTDETRDetectionModel(cfg, nc=self.data["nc"], verbose=verbose and RANK == -1)
        if weights:
            model.load(weights)  # åŠ è½½é¢„è®­ç»ƒæƒé‡
        return model

    def build_dataset(self, img_path, mode="val", batch=None):
        """
        æ„å»ºå¹¶è¿”å›ä¸€ä¸ªRT-DETRæ•°æ®é›†ç”¨äºè®­ç»ƒæˆ–éªŒè¯ã€‚

        å‚æ•°:
            img_path (str): åŒ…å«å›¾åƒçš„æ–‡ä»¶å¤¹è·¯å¾„ã€‚
            mode (str): æ•°æ®é›†æ¨¡å¼ï¼Œ'train'æˆ–'val'ã€‚
            batch (int, optional): çŸ©å½¢è®­ç»ƒçš„æ‰¹é‡å¤§å°ï¼Œé»˜è®¤ä¸ºNoneã€‚

        è¿”å›:
            (RTDETRDataset): ç‰¹å®šæ¨¡å¼çš„æ•°æ®é›†å¯¹è±¡ã€‚
        """
        # åˆ›å»ºRT-DETRæ•°æ®é›†å®ä¾‹
        return RTDETRDataset(
            img_path=img_path,
            imgsz=self.args.imgsz,
            batch_size=batch,
            augment=mode == "train",  # è®­ç»ƒæ¨¡å¼ä¸‹è¿›è¡Œæ•°æ®å¢å¼º
            hyp=self.args,
            rect=False,
            cache=self.args.cache or None,
            prefix=colorstr(f"{mode}: "),  # ä¸ºæ¨¡å¼æ·»åŠ å‰ç¼€
            data=self.data,
        )

    def get_validator(self):
        """
        è¿”å›é€‚åˆRT-DETRæ¨¡å‹éªŒè¯çš„æ£€æµ‹éªŒè¯å™¨ã€‚

        è¿”å›:
            (RTDETRValidator): æ¨¡å‹éªŒè¯å™¨å¯¹è±¡ã€‚
        """
        self.loss_names = "giou_loss", "cls_loss", "l1_loss"  # å®šä¹‰æŸå¤±åç§°
        return RTDETRValidator(self.test_loader, save_dir=self.save_dir, args=copy(self.args))

    def preprocess_batch(self, batch):
        """
        é¢„å¤„ç†ä¸€æ‰¹å›¾åƒï¼Œç¼©æ”¾å¹¶è½¬æ¢å›¾åƒä¸ºæµ®ç‚¹æ ¼å¼ã€‚

        å‚æ•°:
            batch (dict): åŒ…å«ä¸€æ‰¹å›¾åƒã€è¾¹ç•Œæ¡†å’Œæ ‡ç­¾çš„å­—å…¸ã€‚

        è¿”å›:
            (dict): é¢„å¤„ç†åçš„æ‰¹æ¬¡ã€‚
        """
        batch = super().preprocess_batch(batch)  # è°ƒç”¨çˆ¶ç±»çš„é¢„å¤„ç†æ–¹æ³•
        bs = len(batch["img"])  # è·å–æ‰¹æ¬¡å¤§å°
        batch_idx = batch["batch_idx"]  # è·å–æ‰¹æ¬¡ç´¢å¼•
        gt_bbox, gt_class = [], []  # åˆå§‹åŒ–çœŸå®è¾¹ç•Œæ¡†å’Œç±»åˆ«åˆ—è¡¨
        
        # éå†æ¯ä¸ªå›¾åƒï¼Œæå–å¯¹åº”çš„è¾¹ç•Œæ¡†å’Œç±»åˆ«
        for i in range(bs):
            gt_bbox.append(batch["bboxes"][batch_idx == i].to(batch_idx.device))  # è·å–çœŸå®è¾¹ç•Œæ¡†
            gt_class.append(batch["cls"][batch_idx == i].to(device=batch_idx.device, dtype=torch.long))  # è·å–çœŸå®ç±»åˆ«
        return batch  # è¿”å›é¢„å¤„ç†åçš„æ‰¹æ¬¡
```

### ä»£ç æ³¨é‡Šè¯´æ˜ï¼š
1. **å¯¼å…¥éƒ¨åˆ†**ï¼šå¼•å…¥äº†å¿…è¦çš„åº“å’Œæ¨¡å—ï¼ŒåŒ…æ‹¬æ¨¡å‹è®­ç»ƒç±»ã€æ•°æ®é›†å’ŒéªŒè¯å™¨ã€‚
2. **RTDETRTrainerç±»**ï¼šç»§æ‰¿è‡ªYOLOçš„æ£€æµ‹è®­ç»ƒå™¨ï¼Œä¸“é—¨ç”¨äºRT-DETRæ¨¡å‹çš„è®­ç»ƒã€‚
3. **get_modelæ–¹æ³•**ï¼šç”¨äºåˆå§‹åŒ–RT-DETRæ¨¡å‹ï¼Œå¯ä»¥åŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚
4. **build_datasetæ–¹æ³•**ï¼šæ ¹æ®ç»™å®šçš„å›¾åƒè·¯å¾„å’Œæ¨¡å¼æ„å»ºæ•°æ®é›†ï¼Œæ”¯æŒè®­ç»ƒå’ŒéªŒè¯æ¨¡å¼ã€‚
5. **get_validatoræ–¹æ³•**ï¼šè¿”å›ä¸€ä¸ªéªŒè¯å™¨ï¼Œç”¨äºæ¨¡å‹çš„éªŒè¯è¿‡ç¨‹ã€‚
6. **preprocess_batchæ–¹æ³•**ï¼šå¯¹è¾“å…¥çš„å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬ç¼©æ”¾å’Œæ ¼å¼è½¬æ¢ï¼Œå¹¶æå–çœŸå®çš„è¾¹ç•Œæ¡†å’Œç±»åˆ«ä¿¡æ¯ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯ä¸€ä¸ªç”¨äºè®­ç»ƒRT-DETRæ¨¡å‹çš„Pythonè„šæœ¬ï¼Œå±äºUltralytics YOLOæ¡†æ¶çš„ä¸€éƒ¨åˆ†ã€‚RT-DETRæ˜¯ä¸€ç§å®æ—¶ç›®æ ‡æ£€æµ‹æ¨¡å‹ï¼Œç”±ç™¾åº¦å¼€å‘ï¼Œç»“åˆäº†è§†è§‰å˜æ¢å™¨ï¼ˆVision Transformersï¼‰æŠ€æœ¯ï¼Œå…·å¤‡IoUæ„ŸçŸ¥æŸ¥è¯¢é€‰æ‹©å’Œå¯è°ƒæ¨ç†é€Ÿåº¦ç­‰ç‰¹æ€§ã€‚

æ–‡ä»¶ä¸­é¦–å…ˆå¯¼å…¥äº†ä¸€äº›å¿…è¦çš„åº“å’Œæ¨¡å—ï¼ŒåŒ…æ‹¬PyTorchã€æ£€æµ‹è®­ç»ƒå™¨ã€RT-DETRæ¨¡å‹ä»¥åŠæ•°æ®é›†å’ŒéªŒè¯å™¨ç­‰ã€‚æ¥ç€å®šä¹‰äº†ä¸€ä¸ªåä¸º`RTDETRTrainer`çš„ç±»ï¼Œå®ƒç»§æ‰¿è‡ª`DetectionTrainer`ç±»ï¼Œä¸“é—¨ç”¨äºRT-DETRæ¨¡å‹çš„è®­ç»ƒã€‚

åœ¨ç±»çš„æ–‡æ¡£å­—ç¬¦ä¸²ä¸­ï¼Œç®€è¦è¯´æ˜äº†RT-DETRæ¨¡å‹çš„ç‰¹ç‚¹å’Œä¸€äº›æ³¨æ„äº‹é¡¹ï¼Œä¾‹å¦‚åœ¨ä½¿ç”¨F.grid_sampleæ—¶ä¸æ”¯æŒ`deterministic=True`å‚æ•°ï¼Œä»¥åŠAMPè®­ç»ƒå¯èƒ½å¯¼è‡´NaNè¾“å‡ºå’Œåœ¨äºŒåˆ†å›¾åŒ¹é…æ—¶å‡ºç°é”™è¯¯ã€‚

ç±»ä¸­åŒ…å«å¤šä¸ªæ–¹æ³•ï¼š

1. `get_model`æ–¹æ³•ç”¨äºåˆå§‹åŒ–å¹¶è¿”å›ä¸€ä¸ªRT-DETRæ¨¡å‹ï¼Œæ¥å—æ¨¡å‹é…ç½®ã€é¢„è®­ç»ƒæƒé‡è·¯å¾„å’Œæ˜¯å¦è¿›è¡Œè¯¦ç»†æ—¥å¿—è®°å½•çš„å‚æ•°ã€‚è¯¥æ–¹æ³•åˆ›å»ºä¸€ä¸ª`RTDETRDetectionModel`å®ä¾‹ï¼Œå¹¶åœ¨æä¾›æƒé‡æ—¶åŠ è½½å®ƒã€‚

2. `build_dataset`æ–¹æ³•ç”¨äºæ„å»ºå¹¶è¿”å›ä¸€ä¸ªRT-DETRæ•°æ®é›†ï¼Œæ¥å—å›¾åƒè·¯å¾„ã€æ¨¡å¼ï¼ˆè®­ç»ƒæˆ–éªŒè¯ï¼‰å’Œæ‰¹é‡å¤§å°ä½œä¸ºå‚æ•°ã€‚è¯¥æ–¹æ³•åˆ›å»ºä¸€ä¸ª`RTDETRDataset`å®ä¾‹ï¼Œå¹¶æ ¹æ®æ¨¡å¼å†³å®šæ˜¯å¦è¿›è¡Œæ•°æ®å¢å¼ºã€‚

3. `get_validator`æ–¹æ³•è¿”å›ä¸€ä¸ªé€‚ç”¨äºRT-DETRæ¨¡å‹éªŒè¯çš„æ£€æµ‹éªŒè¯å™¨ã€‚å®ƒè®¾ç½®äº†æŸå¤±åç§°ï¼Œå¹¶åˆ›å»ºä¸€ä¸ª`RTDETRValidator`å®ä¾‹ã€‚

4. `preprocess_batch`æ–¹æ³•ç”¨äºé¢„å¤„ç†ä¸€æ‰¹å›¾åƒï¼Œä¸»è¦æ˜¯å¯¹å›¾åƒè¿›è¡Œç¼©æ”¾å’Œè½¬æ¢ä¸ºæµ®ç‚¹æ ¼å¼ã€‚å®ƒæ¥å—ä¸€ä¸ªåŒ…å«å›¾åƒã€è¾¹ç•Œæ¡†å’Œæ ‡ç­¾çš„å­—å…¸ï¼Œå¹¶è¿”å›ç»è¿‡é¢„å¤„ç†çš„æ‰¹æ¬¡æ•°æ®ã€‚

æ€»ä½“è€Œè¨€ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸ºRT-DETRæ¨¡å‹çš„è®­ç»ƒæä¾›äº†å¿…è¦çš„ç»“æ„å’ŒåŠŸèƒ½ï¼Œæ¶µç›–äº†æ¨¡å‹åˆå§‹åŒ–ã€æ•°æ®é›†æ„å»ºã€éªŒè¯å™¨è·å–å’Œæ‰¹æ¬¡é¢„å¤„ç†ç­‰å…³é”®æ­¥éª¤ã€‚

#### 11.5 train.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å’Œæ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
import random
import numpy as np
import torch.nn as nn
from ultralytics.data import build_dataloader, build_yolo_dataset
from ultralytics.engine.trainer import BaseTrainer
from ultralytics.models import yolo
from ultralytics.nn.tasks import DetectionModel
from ultralytics.utils import LOGGER, RANK
from ultralytics.utils.torch_utils import de_parallel, torch_distributed_zero_first

class DetectionTrainer(BaseTrainer):
    """
    æ‰©å±•è‡ª BaseTrainer ç±»ï¼Œç”¨äºåŸºäºæ£€æµ‹æ¨¡å‹çš„è®­ç»ƒã€‚
    """

    def build_dataset(self, img_path, mode="train", batch=None):
        """
        æ„å»º YOLO æ•°æ®é›†ã€‚

        å‚æ•°:
            img_path (str): åŒ…å«å›¾åƒçš„æ–‡ä»¶å¤¹è·¯å¾„ã€‚
            mode (str): æ¨¡å¼ä¸º `train` æˆ– `val`ï¼Œç”¨æˆ·å¯ä»¥ä¸ºæ¯ç§æ¨¡å¼è‡ªå®šä¹‰ä¸åŒçš„å¢å¼ºã€‚
            batch (int, optional): æ‰¹æ¬¡å¤§å°ï¼Œä»…ç”¨äº `rect` æ¨¡å¼ã€‚é»˜è®¤ä¸º Noneã€‚
        """
        gs = max(int(de_parallel(self.model).stride.max() if self.model else 0), 32)  # è·å–æ¨¡å‹çš„æœ€å¤§æ­¥å¹…
        return build_yolo_dataset(self.args, img_path, batch, self.data, mode=mode, rect=mode == "val", stride=gs)

    def get_dataloader(self, dataset_path, batch_size=16, rank=0, mode="train"):
        """æ„é€ å¹¶è¿”å›æ•°æ®åŠ è½½å™¨ã€‚"""
        assert mode in ["train", "val"]  # ç¡®ä¿æ¨¡å¼æœ‰æ•ˆ
        with torch_distributed_zero_first(rank):  # ä»…åœ¨ DDP ä¸­åˆå§‹åŒ–æ•°æ®é›† *.cache ä¸€æ¬¡
            dataset = self.build_dataset(dataset_path, mode, batch_size)  # æ„å»ºæ•°æ®é›†
        shuffle = mode == "train"  # è®­ç»ƒæ¨¡å¼ä¸‹æ‰“ä¹±æ•°æ®
        workers = self.args.workers if mode == "train" else self.args.workers * 2  # è®¾ç½®å·¥ä½œçº¿ç¨‹æ•°
        return build_dataloader(dataset, batch_size, workers, shuffle, rank)  # è¿”å›æ•°æ®åŠ è½½å™¨

    def preprocess_batch(self, batch):
        """å¯¹å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬ç¼©æ”¾å’Œè½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚"""
        batch["img"] = batch["img"].to(self.device, non_blocking=True).float() / 255  # å°†å›¾åƒè½¬æ¢ä¸ºæµ®ç‚¹æ•°å¹¶å½’ä¸€åŒ–
        if self.args.multi_scale:  # å¦‚æœå¯ç”¨å¤šå°ºåº¦
            imgs = batch["img"]
            sz = (
                random.randrange(self.args.imgsz * 0.5, self.args.imgsz * 1.5 + self.stride)
                // self.stride
                * self.stride
            )  # éšæœºé€‰æ‹©æ–°çš„å°ºå¯¸
            sf = sz / max(imgs.shape[2:])  # è®¡ç®—ç¼©æ”¾å› å­
            if sf != 1:  # å¦‚æœéœ€è¦ç¼©æ”¾
                ns = [
                    math.ceil(x * sf / self.stride) * self.stride for x in imgs.shape[2:]
                ]  # è®¡ç®—æ–°çš„å½¢çŠ¶
                imgs = nn.functional.interpolate(imgs, size=ns, mode="bilinear", align_corners=False)  # è¿›è¡Œæ’å€¼ç¼©æ”¾
            batch["img"] = imgs  # æ›´æ–°æ‰¹æ¬¡å›¾åƒ
        return batch

    def get_model(self, cfg=None, weights=None, verbose=True):
        """è¿”å› YOLO æ£€æµ‹æ¨¡å‹ã€‚"""
        model = DetectionModel(cfg, nc=self.data["nc"], verbose=verbose and RANK == -1)  # åˆ›å»ºæ£€æµ‹æ¨¡å‹
        if weights:
            model.load(weights)  # åŠ è½½æƒé‡
        return model

    def plot_training_samples(self, batch, ni):
        """ç»˜åˆ¶å¸¦æœ‰æ³¨é‡Šçš„è®­ç»ƒæ ·æœ¬ã€‚"""
        plot_images(
            images=batch["img"],
            batch_idx=batch["batch_idx"],
            cls=batch["cls"].squeeze(-1),
            bboxes=batch["bboxes"],
            paths=batch["im_file"],
            fname=self.save_dir / f"train_batch{ni}.jpg",
            on_plot=self.on_plot,
        )

    def plot_metrics(self):
        """ä» CSV æ–‡ä»¶ç»˜åˆ¶æŒ‡æ ‡ã€‚"""
        plot_results(file=self.csv, on_plot=self.on_plot)  # ä¿å­˜ç»“æœå›¾åƒ
```

### ä»£ç æ³¨é‡Šè¯´æ˜ï¼š
1. **ç±»å®šä¹‰**ï¼š`DetectionTrainer` ç»§æ‰¿è‡ª `BaseTrainer`ï¼Œç”¨äºè®­ç»ƒ YOLO æ£€æµ‹æ¨¡å‹ã€‚
2. **æ•°æ®é›†æ„å»º**ï¼š`build_dataset` æ–¹æ³•æ ¹æ®è¾“å…¥è·¯å¾„å’Œæ¨¡å¼æ„å»º YOLO æ•°æ®é›†ï¼Œå¹¶è¿”å›æ•°æ®é›†å¯¹è±¡ã€‚
3. **æ•°æ®åŠ è½½å™¨**ï¼š`get_dataloader` æ–¹æ³•æ„é€ æ•°æ®åŠ è½½å™¨ï¼Œç¡®ä¿åœ¨åˆ†å¸ƒå¼è®­ç»ƒä¸­åªåˆå§‹åŒ–ä¸€æ¬¡æ•°æ®é›†ã€‚
4. **æ‰¹æ¬¡é¢„å¤„ç†**ï¼š`preprocess_batch` æ–¹æ³•å¯¹è¾“å…¥æ‰¹æ¬¡è¿›è¡Œå½’ä¸€åŒ–å’Œç¼©æ”¾å¤„ç†ï¼Œä»¥é€‚åº”æ¨¡å‹è¾“å…¥ã€‚
5. **æ¨¡å‹è·å–**ï¼š`get_model` æ–¹æ³•è¿”å›ä¸€ä¸ª YOLO æ£€æµ‹æ¨¡å‹ï¼Œå¹¶å¯é€‰æ‹©åŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚
6. **ç»˜å›¾åŠŸèƒ½**ï¼š`plot_training_samples` å’Œ `plot_metrics` æ–¹æ³•ç”¨äºå¯è§†åŒ–è®­ç»ƒæ ·æœ¬å’Œè®­ç»ƒæŒ‡æ ‡ï¼Œä¾¿äºåˆ†ææ¨¡å‹æ€§èƒ½ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶ `train.py` æ˜¯ä¸€ä¸ªç”¨äºè®­ç»ƒ YOLOï¼ˆYou Only Look Onceï¼‰ç›®æ ‡æ£€æµ‹æ¨¡å‹çš„è„šæœ¬ï¼Œç»§æ‰¿è‡ª `BaseTrainer` ç±»ã€‚å®ƒåŒ…å«äº†ä¸€ç³»åˆ—æ–¹æ³•ï¼Œç”¨äºæ„å»ºæ•°æ®é›†ã€è·å–æ•°æ®åŠ è½½å™¨ã€é¢„å¤„ç†å›¾åƒã€è®¾ç½®æ¨¡å‹å±æ€§ã€è·å–æ¨¡å‹ã€éªŒè¯æ¨¡å‹ã€è®°å½•æŸå¤±ã€è¾“å‡ºè®­ç»ƒè¿›åº¦ã€ç»˜åˆ¶è®­ç»ƒæ ·æœ¬å’Œç»˜åˆ¶è®­ç»ƒæŒ‡æ ‡ç­‰ã€‚

é¦–å…ˆï¼Œ`DetectionTrainer` ç±»é€šè¿‡ `build_dataset` æ–¹æ³•æ„å»º YOLO æ•°æ®é›†ã€‚è¯¥æ–¹æ³•æ¥å—å›¾åƒè·¯å¾„ã€æ¨¡å¼ï¼ˆè®­ç»ƒæˆ–éªŒè¯ï¼‰å’Œæ‰¹é‡å¤§å°ä½œä¸ºå‚æ•°ï¼Œä½¿ç”¨ `build_yolo_dataset` å‡½æ•°ç”Ÿæˆæ•°æ®é›†ã€‚æ•°æ®é›†çš„æ„å»ºä¼šè€ƒè™‘åˆ°æ¨¡å‹çš„æ­¥å¹…ï¼ˆstrideï¼‰ï¼Œç¡®ä¿è¾“å…¥å›¾åƒçš„å°ºå¯¸ä¸æ¨¡å‹å…¼å®¹ã€‚

æ¥ä¸‹æ¥ï¼Œ`get_dataloader` æ–¹æ³•ç”¨äºæ„å»ºå¹¶è¿”å›æ•°æ®åŠ è½½å™¨ã€‚å®ƒä¼šæ ¹æ®æ¨¡å¼ï¼ˆè®­ç»ƒæˆ–éªŒè¯ï¼‰åˆå§‹åŒ–æ•°æ®é›†ï¼Œå¹¶æ ¹æ®éœ€è¦è®¾ç½®æ˜¯å¦æ‰“ä¹±æ•°æ®é¡ºåºã€‚å¯¹äºè®­ç»ƒæ¨¡å¼ï¼Œæ•°æ®åŠ è½½å™¨ä¼šæ‰“ä¹±æ•°æ®ï¼Œè€Œåœ¨éªŒè¯æ¨¡å¼ä¸‹åˆ™ä¸ä¼šã€‚

åœ¨ `preprocess_batch` æ–¹æ³•ä¸­ï¼Œç¨‹åºå¯¹å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬å°†å›¾åƒè½¬æ¢ä¸ºæµ®ç‚¹æ•°å¹¶ç¼©æ”¾åˆ°[0, 1]çš„èŒƒå›´å†…ã€‚å¦‚æœå¯ç”¨äº†å¤šå°ºåº¦è®­ç»ƒï¼Œå›¾åƒçš„å°ºå¯¸ä¼šåœ¨ä¸€å®šèŒƒå›´å†…éšæœºè°ƒæ•´ï¼Œä»¥å¢å¼ºæ¨¡å‹çš„é²æ£’æ€§ã€‚

`set_model_attributes` æ–¹æ³•ç”¨äºè®¾ç½®æ¨¡å‹çš„å±æ€§ï¼ŒåŒ…æ‹¬ç±»åˆ«æ•°é‡å’Œç±»åˆ«åç§°ç­‰ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿æ¨¡å‹åœ¨è®­ç»ƒæ—¶ä½¿ç”¨æ­£ç¡®çš„å‚æ•°ã€‚

`get_model` æ–¹æ³•è¿”å›ä¸€ä¸ª YOLO æ£€æµ‹æ¨¡å‹å®ä¾‹ï¼Œå¹¶å¯ä»¥é€‰æ‹©åŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚`get_validator` æ–¹æ³•åˆ™è¿”å›ä¸€ä¸ªç”¨äºéªŒè¯æ¨¡å‹æ€§èƒ½çš„éªŒè¯å™¨ã€‚

åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œ`label_loss_items` æ–¹æ³•ç”¨äºè¿”å›å¸¦æœ‰æ ‡ç­¾çš„æŸå¤±å­—å…¸ï¼Œæ–¹ä¾¿è®°å½•å’Œç›‘æ§è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŸå¤±æƒ…å†µã€‚`progress_string` æ–¹æ³•ç”Ÿæˆä¸€ä¸ªæ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ï¼Œæ˜¾ç¤ºå½“å‰è®­ç»ƒè¿›åº¦ï¼ŒåŒ…æ‹¬å½“å‰çš„ epochã€GPU å†…å­˜ä½¿ç”¨æƒ…å†µã€æŸå¤±å€¼ã€å®ä¾‹æ•°é‡å’Œå›¾åƒå¤§å°ç­‰ä¿¡æ¯ã€‚

æ­¤å¤–ï¼Œ`plot_training_samples` æ–¹æ³•ç”¨äºç»˜åˆ¶è®­ç»ƒæ ·æœ¬åŠå…¶æ ‡æ³¨ï¼Œä¾¿äºå¯è§†åŒ–è®­ç»ƒæ•°æ®çš„è´¨é‡ã€‚æœ€åï¼Œ`plot_metrics` å’Œ `plot_training_labels` æ–¹æ³•åˆ†åˆ«ç”¨äºç»˜åˆ¶è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŒ‡æ ‡å’Œæ ‡ç­¾ï¼Œä»¥ä¾¿äºåˆ†ææ¨¡å‹çš„è®­ç»ƒæ•ˆæœã€‚

æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸ªæ–‡ä»¶æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„è®­ç»ƒæ¡†æ¶ï¼Œæ¶µç›–äº†ä»æ•°æ®åŠ è½½ã€é¢„å¤„ç†ã€æ¨¡å‹è®­ç»ƒåˆ°ç»“æœå¯è§†åŒ–çš„å„ä¸ªæ–¹é¢ï¼Œæ—¨åœ¨å¸®åŠ©ç”¨æˆ·é«˜æ•ˆåœ°è®­ç»ƒ YOLO ç›®æ ‡æ£€æµ‹æ¨¡å‹ã€‚

#### 11.6 code\ultralytics\utils\tuner.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å’Œæ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
import subprocess
from ultralytics.utils import LOGGER, NUM_THREADS
from ray import tune
from ray.air import RunConfig
from ray.tune.schedulers import ASHAScheduler
from ray.air.integrations.wandb import WandbLoggerCallback

def run_ray_tune(model, space: dict = None, grace_period: int = 10, gpu_per_trial: int = None, max_samples: int = 10, **train_args):
    """
    ä½¿ç”¨ Ray Tune è¿›è¡Œè¶…å‚æ•°è°ƒä¼˜ã€‚

    å‚æ•°:
        model (YOLO): è¦è°ƒä¼˜çš„æ¨¡å‹ã€‚
        space (dict, optional): è¶…å‚æ•°æœç´¢ç©ºé—´ã€‚é»˜è®¤ä¸º Noneã€‚
        grace_period (int, optional): ASHA è°ƒåº¦å™¨çš„å®½é™æœŸï¼ˆä»¥ epoch ä¸ºå•ä½ï¼‰ã€‚é»˜è®¤ä¸º 10ã€‚
        gpu_per_trial (int, optional): æ¯ä¸ªè¯•éªŒåˆ†é…çš„ GPU æ•°é‡ã€‚é»˜è®¤ä¸º Noneã€‚
        max_samples (int, optional): è¦è¿è¡Œçš„æœ€å¤§è¯•éªŒæ¬¡æ•°ã€‚é»˜è®¤ä¸º 10ã€‚
        train_args (dict, optional): ä¼ é€’ç»™ `train()` æ–¹æ³•çš„é¢å¤–å‚æ•°ã€‚é»˜è®¤ä¸º {}ã€‚

    è¿”å›:
        (dict): åŒ…å«è¶…å‚æ•°æœç´¢ç»“æœçš„å­—å…¸ã€‚
    """

    # æ—¥å¿—ä¿¡æ¯ï¼Œæä¾› Ray Tune çš„æ–‡æ¡£é“¾æ¥
    LOGGER.info("ğŸ’¡ Learn about RayTune at https://docs.ultralytics.com/integrations/ray-tune")

    # å°è¯•å®‰è£… Ray Tune
    try:
        subprocess.run("pip install ray[tune]".split(), check=True)
    except Exception as e:
        raise ModuleNotFoundError('è°ƒä¼˜è¶…å‚æ•°éœ€è¦ Ray Tuneã€‚è¯·ä½¿ç”¨: pip install "ray[tune]" å®‰è£…') from e

    # å®šä¹‰é»˜è®¤çš„è¶…å‚æ•°æœç´¢ç©ºé—´
    default_space = {
        "lr0": tune.uniform(1e-5, 1e-1),  # åˆå§‹å­¦ä¹ ç‡
        "lrf": tune.uniform(0.01, 1.0),  # æœ€ç»ˆå­¦ä¹ ç‡æ¯”ä¾‹
        "momentum": tune.uniform(0.6, 0.98),  # åŠ¨é‡
        "weight_decay": tune.uniform(0.0, 0.001),  # æƒé‡è¡°å‡
        "warmup_epochs": tune.uniform(0.0, 5.0),  # é¢„çƒ­ epochs
        # å…¶ä»–è¶…å‚æ•°...
    }

    # å°†æ¨¡å‹æ”¾å…¥ Ray å­˜å‚¨ä¸­
    model_in_store = ray.put(model)

    def _tune(config):
        """
        ä½¿ç”¨æŒ‡å®šçš„è¶…å‚æ•°å’Œé¢å¤–å‚æ•°è®­ç»ƒ YOLO æ¨¡å‹ã€‚

        å‚æ•°:
            config (dict): ç”¨äºè®­ç»ƒçš„è¶…å‚æ•°å­—å…¸ã€‚

        è¿”å›:
            None.
        """
        model_to_train = ray.get(model_in_store)  # ä» Ray å­˜å‚¨ä¸­è·å–æ¨¡å‹
        model_to_train.reset_callbacks()  # é‡ç½®å›è°ƒ
        config.update(train_args)  # æ›´æ–°é…ç½®
        results = model_to_train.train(**config)  # è®­ç»ƒæ¨¡å‹
        return results.results_dict  # è¿”å›ç»“æœå­—å…¸

    # è·å–æœç´¢ç©ºé—´
    if not space:
        space = default_space  # å¦‚æœæ²¡æœ‰æä¾›æœç´¢ç©ºé—´ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼

    # å®šä¹‰å¯è®­ç»ƒå‡½æ•°åŠå…¶èµ„æºåˆ†é…
    trainable_with_resources = tune.with_resources(_tune, {"cpu": NUM_THREADS, "gpu": gpu_per_trial or 0})

    # å®šä¹‰ ASHA è°ƒåº¦å™¨
    asha_scheduler = ASHAScheduler(
        time_attr="epoch",
        metric="metric_name",  # è¿™é‡Œéœ€è¦æ ¹æ®å…·ä½“ä»»åŠ¡å®šä¹‰
        mode="max",
        max_t=train_args.get("epochs", 100),  # æœ€å¤§è®­ç»ƒ epochs
        grace_period=grace_period,
        reduction_factor=3,
    )

    # å®šä¹‰å›è°ƒ
    tuner_callbacks = [WandbLoggerCallback(project="YOLOv8-tune")] if wandb else []

    # åˆ›å»º Ray Tune è¶…å‚æ•°æœç´¢è°ƒä¼˜å™¨
    tuner = tune.Tuner(
        trainable_with_resources,
        param_space=space,
        tune_config=tune.TuneConfig(scheduler=asha_scheduler, num_samples=max_samples),
        run_config=RunConfig(callbacks=tuner_callbacks),
    )

    # è¿è¡Œè¶…å‚æ•°æœç´¢
    tuner.fit()

    # è¿”å›è¶…å‚æ•°æœç´¢çš„ç»“æœ
    return tuner.get_results()
```

### ä»£ç æ³¨é‡Šè¯´æ˜ï¼š
1. **å¯¼å…¥å¿…è¦çš„åº“**ï¼šå¯¼å…¥ `subprocess` ç”¨äºå®‰è£…ä¾èµ–ï¼Œå¯¼å…¥ `ray` å’Œ `tune` è¿›è¡Œè¶…å‚æ•°è°ƒä¼˜ã€‚
2. **å®šä¹‰ `run_ray_tune` å‡½æ•°**ï¼šè¯¥å‡½æ•°è´Ÿè´£æ‰§è¡Œè¶…å‚æ•°è°ƒä¼˜ï¼Œæ¥æ”¶æ¨¡å‹ã€è¶…å‚æ•°ç©ºé—´ã€å®½é™æœŸã€GPU æ•°é‡ã€æœ€å¤§æ ·æœ¬æ•°ç­‰å‚æ•°ã€‚
3. **å®‰è£… Ray Tune**ï¼šå°è¯•å®‰è£… Ray Tuneï¼Œå¦‚æœå¤±è´¥åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚
4. **å®šä¹‰é»˜è®¤è¶…å‚æ•°ç©ºé—´**ï¼šåŒ…æ‹¬å­¦ä¹ ç‡ã€åŠ¨é‡ç­‰å‚æ•°çš„èŒƒå›´ã€‚
5. **å°†æ¨¡å‹æ”¾å…¥ Ray å­˜å‚¨**ï¼šä»¥ä¾¿åœ¨è°ƒä¼˜è¿‡ç¨‹ä¸­å¯ä»¥æ–¹ä¾¿åœ°è·å–æ¨¡å‹ã€‚
6. **å®šä¹‰ `_tune` å‡½æ•°**ï¼šè¯¥å‡½æ•°æ ¹æ®ç»™å®šçš„è¶…å‚æ•°é…ç½®è®­ç»ƒæ¨¡å‹ï¼Œå¹¶è¿”å›è®­ç»ƒç»“æœã€‚
7. **è·å–æœç´¢ç©ºé—´**ï¼šå¦‚æœæ²¡æœ‰æä¾›æœç´¢ç©ºé—´ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ã€‚
8. **å®šä¹‰å¯è®­ç»ƒå‡½æ•°å’Œèµ„æºåˆ†é…**ï¼šä½¿ç”¨ `tune.with_resources` æŒ‡å®š CPU å’Œ GPU çš„ä½¿ç”¨ã€‚
9. **å®šä¹‰ ASHA è°ƒåº¦å™¨**ï¼šç”¨äºç®¡ç†è¶…å‚æ•°æœç´¢çš„è°ƒåº¦ç­–ç•¥ã€‚
10. **åˆ›å»ºè°ƒä¼˜å™¨å¹¶è¿è¡Œ**ï¼šä½¿ç”¨ `tune.Tuner` åˆ›å»ºè°ƒä¼˜å™¨å¹¶å¼€å§‹è¶…å‚æ•°æœç´¢ï¼Œæœ€åè¿”å›ç»“æœã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯ä¸€ä¸ªç”¨äºè¶…å‚æ•°è°ƒä¼˜çš„æ¨¡å—ï¼Œä¸»è¦é’ˆå¯¹Ultralytics YOLOæ¨¡å‹ã€‚æ–‡ä»¶çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯åˆ©ç”¨Ray Tuneåº“æ¥è¿›è¡Œè¶…å‚æ•°çš„è‡ªåŠ¨æœç´¢å’Œä¼˜åŒ–ã€‚é¦–å…ˆï¼Œç¨‹åºå¯¼å…¥äº†ä¸€äº›å¿…è¦çš„åº“å’Œæ¨¡å—ï¼ŒåŒ…æ‹¬ç”¨äºé…ç½®çš„TASK2DATAã€TASK2METRICã€get_save_dirç­‰ã€‚

`run_ray_tune`å‡½æ•°æ˜¯è¿™ä¸ªæ¨¡å—çš„ä¸»è¦å…¥å£ï¼Œæ¥å—å¤šä¸ªå‚æ•°ã€‚å‚æ•°åŒ…æ‹¬å¾…è°ƒä¼˜çš„æ¨¡å‹ã€è¶…å‚æ•°æœç´¢ç©ºé—´ã€ASHAè°ƒåº¦å™¨çš„å®½é™æœŸã€æ¯ä¸ªè¯•éªŒåˆ†é…çš„GPUæ•°é‡ã€æœ€å¤§æ ·æœ¬æ•°ç­‰ã€‚å‡½æ•°é¦–å…ˆè®°å½•äº†ä¸€æ¡ä¿¡æ¯ï¼ŒæŒ‡å‘Ray Tuneçš„æ–‡æ¡£ã€‚æ¥ç€ï¼Œå¦‚æœæ²¡æœ‰æä¾›è®­ç»ƒå‚æ•°ï¼Œåˆ™åˆå§‹åŒ–ä¸ºç©ºå­—å…¸ã€‚

å‡½æ•°å°è¯•å®‰è£…Ray Tuneåº“ï¼Œå¹¶å¯¼å…¥ç›¸å…³æ¨¡å—ã€‚å¦‚æœå¯¼å…¥å¤±è´¥ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªæ¨¡å—æœªæ‰¾åˆ°çš„å¼‚å¸¸ã€‚éšåï¼Œç¨‹åºæ£€æŸ¥æ˜¯å¦å®‰è£…äº†WandBï¼ˆWeights and Biasesï¼‰åº“ï¼Œç”¨äºè®°å½•å®éªŒç»“æœã€‚

æ¥ä¸‹æ¥ï¼Œå®šä¹‰äº†ä¸€ä¸ªé»˜è®¤çš„è¶…å‚æ•°æœç´¢ç©ºé—´ï¼ŒåŒ…æ‹¬å­¦ä¹ ç‡ã€åŠ¨é‡ã€æƒé‡è¡°å‡ã€æ•°æ®å¢å¼ºå‚æ•°ç­‰ã€‚è¿™äº›å‚æ•°å°†ç”¨äºæ¨¡å‹è®­ç»ƒçš„ä¸åŒé…ç½®ã€‚

å‡½æ•°å†…éƒ¨å®šä¹‰äº†ä¸€ä¸ªåä¸º`_tune`çš„è¾…åŠ©å‡½æ•°ï¼Œè´Ÿè´£æ ¹æ®ç»™å®šçš„è¶…å‚æ•°é…ç½®è®­ç»ƒYOLOæ¨¡å‹ã€‚è¿™ä¸ªå‡½æ•°ä»Rayå­˜å‚¨ä¸­è·å–æ¨¡å‹ï¼Œé‡ç½®å›è°ƒï¼Œå¹¶å°†è¶…å‚æ•°ä¸å…¶ä»–è®­ç»ƒå‚æ•°åˆå¹¶ï¼Œæœ€åè°ƒç”¨æ¨¡å‹çš„è®­ç»ƒæ–¹æ³•ã€‚

åœ¨è·å–æœç´¢ç©ºé—´åï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰æä¾›è‡ªå®šä¹‰çš„ç©ºé—´ï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„æœç´¢ç©ºé—´ã€‚æ¥ç€ï¼Œç¨‹åºè·å–æ•°æ®é›†çš„ä¿¡æ¯ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°è¶…å‚æ•°ç©ºé—´ä¸­ã€‚

ç„¶åï¼Œå®šä¹‰äº†ä¸€ä¸ªå¯è®­ç»ƒçš„å‡½æ•°ï¼ŒæŒ‡å®šäº†èµ„æºåˆ†é…ï¼ŒåŒ…æ‹¬CPUå’ŒGPUçš„æ•°é‡ã€‚æ¥ç€ï¼Œåˆ›å»ºäº†ä¸€ä¸ªASHAè°ƒåº¦å™¨ï¼Œç”¨äºç®¡ç†è¶…å‚æ•°æœç´¢çš„è¿‡ç¨‹ï¼Œå¹¶å®šä¹‰äº†å›è°ƒå‡½æ•°ï¼Œè‹¥WandBå¯ç”¨ï¼Œåˆ™å°†å…¶æ·»åŠ åˆ°å›è°ƒåˆ—è¡¨ä¸­ã€‚

æœ€åï¼Œåˆ›å»ºRay Tuneçš„è¶…å‚æ•°æœç´¢è°ƒä¼˜å™¨ï¼ŒæŒ‡å®šå‚æ•°ç©ºé—´ã€è°ƒåº¦å™¨å’Œå›è°ƒé…ç½®ï¼Œå¹¶è¿è¡Œè¶…å‚æ•°æœç´¢ã€‚å‡½æ•°çš„æœ€åè¿”å›è°ƒä¼˜ç»“æœï¼ŒåŒ…å«äº†è¶…å‚æ•°æœç´¢çš„ç»“æœä¿¡æ¯ã€‚

æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªæ¨¡å—ä¸ºYOLOæ¨¡å‹æä¾›äº†ä¸€ç§çµæ´»ä¸”é«˜æ•ˆçš„è¶…å‚æ•°è°ƒä¼˜æ–¹æ³•ï¼Œåˆ©ç”¨Ray Tuneçš„å¼ºå¤§åŠŸèƒ½æ¥ä¼˜åŒ–æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ã€‚

### 12.ç³»ç»Ÿæ•´ä½“ç»“æ„ï¼ˆèŠ‚é€‰ï¼‰

### æ•´ä½“åŠŸèƒ½å’Œæ„æ¶æ¦‚æ‹¬

Ultralytics YOLOé¡¹ç›®æ˜¯ä¸€ä¸ªç”¨äºç›®æ ‡æ£€æµ‹çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œä¸»è¦åŸºäºYOLOï¼ˆYou Only Look Onceï¼‰ç³»åˆ—æ¨¡å‹ã€‚è¯¥é¡¹ç›®æä¾›äº†æ¨¡å‹è®­ç»ƒã€éªŒè¯ã€æ¨ç†å’Œè¶…å‚æ•°è°ƒä¼˜ç­‰åŠŸèƒ½ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªé«˜æ•ˆã€çµæ´»çš„ç›®æ ‡æ£€æµ‹è§£å†³æ–¹æ¡ˆã€‚é¡¹ç›®çš„ç»“æ„æ¨¡å—åŒ–ï¼Œä¾¿äºæ‰©å±•å’Œç»´æŠ¤ï¼ŒåŒ…å«å¤šä¸ªå­æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—è´Ÿè´£ç‰¹å®šçš„åŠŸèƒ½ã€‚

- **æ¨¡å‹è®­ç»ƒå’ŒéªŒè¯**ï¼šé€šè¿‡ä¸åŒçš„è®­ç»ƒè„šæœ¬å’Œæ¨¡å‹ç±»ï¼Œç”¨æˆ·å¯ä»¥æ–¹ä¾¿åœ°è®­ç»ƒå’ŒéªŒè¯YOLOæ¨¡å‹åŠå…¶å˜ç§ï¼ˆå¦‚RT-DETRï¼‰ã€‚
- **è¶…å‚æ•°è°ƒä¼˜**ï¼šä½¿ç”¨Ray Tuneåº“è¿›è¡Œè¶…å‚æ•°çš„è‡ªåŠ¨æœç´¢å’Œä¼˜åŒ–ï¼Œä»¥æé«˜æ¨¡å‹æ€§èƒ½ã€‚
- **èº«ä»½éªŒè¯å’Œæ•°æ®ç®¡ç†**ï¼šé€šè¿‡èº«ä»½éªŒè¯æ¨¡å—ç®¡ç†APIå¯†é’¥å’Œç”¨æˆ·èº«ä»½ï¼Œç¡®ä¿æ•°æ®å®‰å…¨ã€‚
- **å¯è§†åŒ–å’Œç”¨æˆ·ç•Œé¢**ï¼šæä¾›ç”¨æˆ·å‹å¥½çš„ç•Œé¢ï¼Œä¾¿äºç”¨æˆ·æ“ä½œå’ŒæŸ¥çœ‹è®­ç»ƒè¿›åº¦ã€‚

### æ–‡ä»¶åŠŸèƒ½æ•´ç†è¡¨

| æ–‡ä»¶è·¯å¾„                                                              | åŠŸèƒ½æè¿°                                                                                       |
|---------------------------------------------------------------------|-----------------------------------------------------------------------------------------------|
| `code\ultralytics\hub\auth.py`                                     | ç®¡ç†APIå¯†é’¥å’Œç”¨æˆ·èº«ä»½éªŒè¯ï¼Œæ”¯æŒå¤šç§èº«ä»½éªŒè¯æ–¹å¼ã€‚                                             |
| `code\ultralytics\trackers\basetrack.py`                           | å®šä¹‰ç›®æ ‡è·Ÿè¸ªçš„åŸºç¡€ç±»å’ŒçŠ¶æ€ï¼Œæä¾›è·Ÿè¸ªå¯¹è±¡çš„ç®¡ç†å’Œæ›´æ–°åŠŸèƒ½ã€‚                                     |
| `ui.py`                                                             | è¿è¡ŒæŒ‡å®šçš„`web.py`è„šæœ¬ï¼Œæä¾›ç”¨æˆ·ç•Œé¢åŠŸèƒ½ã€‚                                                    |
| `code\ultralytics\models\rtdetr\train.py`                         | è®­ç»ƒRT-DETRæ¨¡å‹ï¼ŒåŒ…å«æ•°æ®é›†æ„å»ºã€æ¨¡å‹åˆå§‹åŒ–å’ŒéªŒè¯ç­‰åŠŸèƒ½ã€‚                                     |
| `train.py`                                                         | è®­ç»ƒYOLOæ¨¡å‹çš„ä¸»è„šæœ¬ï¼Œæ¶µç›–æ•°æ®åŠ è½½ã€é¢„å¤„ç†ã€æ¨¡å‹è®­ç»ƒå’Œç»“æœå¯è§†åŒ–ç­‰åŠŸèƒ½ã€‚                      |
| `code\ultralytics\utils\tuner.py`                                  | ä½¿ç”¨Ray Tuneè¿›è¡Œè¶…å‚æ•°è°ƒä¼˜ï¼Œè‡ªåŠ¨æœç´¢å’Œä¼˜åŒ–æ¨¡å‹çš„è¶…å‚æ•°é…ç½®ã€‚                                   |
| `code\ultralytics\models\yolo\__init__.py`                        | åˆå§‹åŒ–YOLOæ¨¡å‹æ¨¡å—ï¼Œå¯èƒ½åŒ…å«æ¨¡å‹å®šä¹‰å’Œç›¸å…³é…ç½®ã€‚                                             |
| `code\ultralytics\models\fastsam\model.py`                        | å®šä¹‰FastSAMæ¨¡å‹çš„ç»“æ„å’ŒåŠŸèƒ½ï¼Œå¯èƒ½ç”¨äºå¿«é€Ÿçš„ç›®æ ‡æ£€æµ‹å’Œåˆ†å‰²ã€‚                                   |
| `code\ultralytics\solutions\ai_gym.py`                            | æä¾›ä¸AI Gymé›†æˆçš„åŠŸèƒ½ï¼Œå¯èƒ½ç”¨äºæ¨¡æ‹Ÿå’Œæµ‹è¯•ç›®æ ‡æ£€æµ‹æ¨¡å‹ã€‚                                      |
| `val.py`                                                           | éªŒè¯YOLOæ¨¡å‹æ€§èƒ½çš„è„šæœ¬ï¼Œé€šå¸¸ç”¨äºè¯„ä¼°æ¨¡å‹åœ¨éªŒè¯é›†ä¸Šçš„è¡¨ç°ã€‚                                     |
| `code\ultralytics\nn\extra_modules\ops_dcnv3\modules\dcnv3.py`   | å®šä¹‰DCNv3ï¼ˆDeformable Convolutional Networks v3ï¼‰æ¨¡å—ï¼Œå¯èƒ½ç”¨äºå¢å¼ºæ¨¡å‹çš„ç‰¹å¾æå–èƒ½åŠ›ã€‚       |
| `code\ultralytics\cfg\__init__.py`                                 | åˆå§‹åŒ–é…ç½®æ¨¡å—ï¼Œå¯èƒ½åŒ…å«æ¨¡å‹è®­ç»ƒå’Œæ¨ç†çš„é…ç½®å‚æ•°ã€‚                                            |
| `code\ultralytics\models\yolo\obb\val.py`                         | éªŒè¯YOLO OBBï¼ˆOriented Bounding Boxï¼‰æ¨¡å‹æ€§èƒ½çš„è„šæœ¬ï¼Œä¸“æ³¨äºå¤„ç†å®šå‘è¾¹ç•Œæ¡†çš„è¯„ä¼°ã€‚             |

è¿™ä¸ªè¡¨æ ¼æ€»ç»“äº†æ¯ä¸ªæ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿäº†è§£Ultralytics YOLOé¡¹ç›®çš„ç»“æ„å’Œå„ä¸ªæ¨¡å—çš„ä½œç”¨ã€‚

æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰â€ä¸­éƒ¨åˆ†ä»£ç å¯èƒ½ä¼šä¼˜åŒ–å‡çº§ï¼Œä»…ä¾›å‚è€ƒå­¦ä¹ ï¼Œå®Œæ•´â€œè®­ç»ƒæºç â€ã€â€œWebå‰ç«¯ç•Œé¢â€å’Œâ€œ70+ç§åˆ›æ–°ç‚¹æºç â€ä»¥â€œ13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–â€çš„å†…å®¹ä¸ºå‡†ã€‚

### 13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–

![19.png](19.png)


# [ä¸‹è½½é“¾æ¥ï¼šhttps://mbd.pub/o/bread/ZpuXkphv](https://mbd.pub/o/bread/ZpuXkphv)